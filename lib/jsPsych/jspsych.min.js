var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,d,a){c!=Array.prototype&&c!=Object.prototype&&(c[d]=a.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var c=0;return function(d){return $jscomp.SYMBOL_PREFIX+(d||"")+c++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var d=0;return $jscomp.iteratorPrototype(function(){return d<c.length?{done:!1,value:c[d++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.makeIterator=function(c){$jscomp.initSymbolIterator();var d=c[Symbol.iterator];return d?d.call(c):$jscomp.arrayIterator(c)};$jscomp.owns=function(c,d){return Object.prototype.hasOwnProperty.call(c,d)};
$jscomp.polyfill=function(c,d,a,b){if(d){a=$jscomp.global;c=c.split(".");for(b=0;b<c.length-1;b++){var f=c[b];f in a||(a[f]={});a=a[f]}c=c[c.length-1];b=a[c];d=d(b);d!=b&&null!=d&&$jscomp.defineProperty(a,c,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Object.assign",function(c){return c?c:function(d,a){for(var b=1;b<arguments.length;b++){var f=arguments[b];if(f)for(var c in f)$jscomp.owns(f,c)&&(d[c]=f[c])}return d}},"es6","es3");
$jscomp.iteratorFromArray=function(c,d){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var a=0,b={next:function(){if(a<c.length){var f=a++;return{value:d(f,c[f]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill("Array.prototype.values",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(d,a){return a})}},"es8","es3");
$jscomp.checkStringArgs=function(c,d,a){if(null==c)throw new TypeError("The 'this' value for String.prototype."+a+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+a+" must not be a regular expression");return c+""};
$jscomp.polyfill("String.prototype.repeat",function(c){return c?c:function(d){var a=$jscomp.checkStringArgs(this,null,"repeat");if(0>d||1342177279<d)throw new RangeError("Invalid count value");d|=0;for(var b="";d;)if(d&1&&(b+=a),d>>>=1)a+=a;return b}},"es6","es3");$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(d){return d})}},"es6","es3");
$jscomp.polyfill("Object.is",function(c){return c?c:function(d,a){return d===a?0!==d||1/d===1/a:d!==d&&a!==a}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(c){return c?c:function(d,a){var b=this;b instanceof String&&(b=String(b));var f=b.length;for(a=a||0;a<f;a++)if(b[a]==d||Object.is(b[a],d))return!0;return!1}},"es7","es3");
$jscomp.polyfill("String.prototype.includes",function(c){return c?c:function(d,a){return-1!==$jscomp.checkStringArgs(this,d,"includes").indexOf(d,a||0)}},"es6","es3");$jscomp.polyfill("Array.prototype.fill",function(c){return c?c:function(d,a,b){var f=this.length||0;0>a&&(a=Math.max(0,f+a));if(null==b||b>f)b=f;b=Number(b);0>b&&(b=Math.max(0,f+b));for(a=Number(a||0);a<b;a++)this[a]=d;return this}},"es6","es3");
window.jsPsych=function(){function c(a,b,d){var f,g,m,e,k,h=-1,l=0,n=0,p=0,r=!1,K,u=this;this.trial=function(){return"undefined"==typeof e?jsPsych.utils.deepCopy(m):h>=e.timeline.length?null:e.timeline[h].trial()};this.markCurrentTrialComplete=function(){"undefined"==typeof e?r=!0:e.timeline[h].markCurrentTrialComplete()};this.nextRepetiton=function(){this.setTimelineVariablesOrder();h=-1;l=0;n++;for(var a=0;a<e.timeline.length;a++)e.timeline[a].reset()};this.setTimelineVariablesOrder=function(){if("undefined"!==
typeof e&&"undefined"!==typeof e.timeline_variables){for(var a=[],b=0;b<e.timeline_variables.length;b++)a.push(b);"undefined"!==typeof e.sample&&("custom"==e.sample.type?a=e.sample.fn(a):"with-replacement"==e.sample.type?a=jsPsych.randomization.sampleWithReplacement(a,e.sample.size,e.sample.weights):"without-replacement"==e.sample.type?a=jsPsych.randomization.sampleWithoutReplacement(a,e.sample.size):"fixed-repetitions"==e.sample.type&&(a=jsPsych.randomization.repeat(a,e.sample.size,!1)));e.randomize_order&&
(a=jsPsych.randomization.shuffle(a));K=a}};this.nextSet=function(){h=-1;l++;for(var a=0;a<e.timeline.length;a++)e.timeline[a].reset()};this.advance=function(){if(r)return!0;if(-1==h){if("undefined"!=typeof e){if("undefined"!==typeof e.conditional_function&&0==e.conditional_function())return r=!0;h=0}h=0;return this.advance()}if("undefined"!==typeof e){for(;h<e.timeline.length;)if(e.timeline[h].advance())h++;else return!1;return l<K.length-1?(this.nextSet(),this.advance()):n<e.repetitions-1?(this.nextRepetiton(),
this.advance()):"undefined"!==typeof e.loop_function?e.loop_function(this.generatedData())?(this.reset(),g.advance()):r=!0:r=!0}};this.isComplete=function(){return r};this.getTimelineVariableValue=function(a){if("undefined"!=typeof e)return e.timeline_variables[K[l]][a]};this.findTimelineVariable=function(a){var b=this.getTimelineVariableValue(a);if("undefined"==typeof b){if("undefined"!==typeof g)return g.findTimelineVariable(a)}else return b};this.timelineVariable=function(a){return"undefined"==
typeof e?this.findTimelineVariable(a):e.timeline[h].timelineVariable(a)};this.length=function(){var a=0;if("undefined"!==typeof e)for(var b=0;b<e.timeline.length;b++)a+=e.timeline[b].length();else return 1;return a};this.percentComplete=function(){for(var a=this.length(),b=0,d=0;d<e.timeline.length;d++)e.timeline[d].isComplete()&&(b+=e.timeline[d].length());return b/a*100};this.reset=function(){h=-1;l=n=0;p++;r=!1;this.setTimelineVariablesOrder();if("undefined"!=typeof e)for(var a=0;a<e.timeline.length;a++)e.timeline[a].reset()};
this.end=function(){r=!0};this.endActiveNode=function(){"undefined"==typeof e?(this.end(),g.end()):e.timeline[h].endActiveNode()};this.ID=function(){if("undefined"==typeof g)return"0."+p;var a=""+(g.ID()+"-");return a+=f+"."+p};this.activeID=function(){return"undefined"==typeof e?this.ID():e.timeline[h].activeID()};this.generatedData=function(){return jsPsych.data.getDataByTimelineNode(this.ID())};this.trialsOfType=function(a){if("undefined"==typeof e)return m.type==a?m:[];for(var b=[],d=0;d<e.timeline.length;d++){var f=
e.timeline[d].trialsOfType(a);b=b.concat(f)}return b};this.insert=function(a){"undefined"==typeof e?console.error("Cannot add new trials to a trial-level node."):e.timeline.push(new c(Object.assign({},k,a),u,e.timeline.length))};(function(){g=b;f="undefined"==typeof b?0:d;if("undefined"!==typeof a.timeline||"function"==typeof jsPsych.plugins[l]){e={timeline:[],loop_function:a.loop_function,conditional_function:a.conditional_function,sample:a.sample,randomize_order:"undefined"==typeof a.randomize_order?
!1:a.randomize_order,repetitions:"undefined"==typeof a.repetitions?1:a.repetitions,timeline_variables:"undefined"==typeof a.timeline_variables?[{}]:a.timeline_variables};u.setTimelineVariablesOrder();l=Object.assign({},a);delete l.timeline;delete l.conditional_function;delete l.loop_function;delete l.randomize_order;delete l.repetitions;delete l.timeline_variables;delete l.sample;k=l;for(var h=0;h<a.timeline.length;h++)e.timeline.push(new c(Object.assign({},l,a.timeline[h]),u,h))}else{var l=a.type;
"undefined"==typeof l?console.error('Trial level node is missing the "type" parameter. The parameters for the node are: '+JSON.stringify(a)):"undefined"==typeof jsPsych.plugins[l]&&"function(){returntimeline.timelineVariable(varname);}"!=l.toString().replace(/\s/g,"")&&console.error('No plugin loaded for trials of type "'+l+'"');m=Object.assign({},a)}})()}function d(){t=!0;!0===k.show_progress_bar&&document.querySelector(".jspsych-display-element").insertAdjacentHTML("afterbegin",'<div id="jspsych-progressbar-container"><span>Completion Progress</span><div id="jspsych-progressbar-outer"><div id="jspsych-progressbar-inner"></div></div></div>');
u=new Date;h.advance();b(h.trial())}function a(){if(E)B=!0;else{n++;h.markCurrentTrialComplete();var a=h.advance();if(!0===k.show_progress_bar&&1==k.auto_update_progress_bar){var d=jsPsych.progress().percent_complete;g.setProgressBar(d/100)}a?("undefined"!==typeof h.end_message&&(r.innerHTML=h.end_message),k.on_finish(jsPsych.data.get())):b(h.trial())}}function b(a){l=a;m=!1;f(a);"function"===typeof a.type&&(a.type=a.type.call());for(var b=Object.keys(a),d=0;d<b.length;d++)"type"!==b[d]&&("undefined"!==
typeof jsPsych.plugins.universalPluginParameters[b[d]]&&jsPsych.plugins.universalPluginParameters[b[d]].type!==jsPsych.plugins.parameterType.FUNCTION||"undefined"!==typeof jsPsych.plugins[a.type].info.parameters[b[d]]&&jsPsych.plugins[a.type].info.parameters[b[d]].type!==jsPsych.plugins.parameterType.FUNCTION)&&"function"==typeof a[b[d]]&&(a[b[d]]=a[b[d]].call());b=Object.keys(jsPsych.plugins[a.type].info.parameters);for(d=0;d<b.length;d++)if("undefined"==typeof a[b[d]]||null===a[b[d]])"undefined"==
typeof jsPsych.plugins[a.type].info.parameters[b[d]].default?console.error("You must specify a value for the "+b[d]+" parameter in the "+a.type+" plugin."):a[b[d]]=jsPsych.plugins[a.type].info.parameters[b[d]].default;k.on_trial_start(a);if("function"==typeof a.on_start)a.on_start(a);p.focus();r.scrollTop=0;jsPsych.plugins[a.type].trial(r,a);if("function"==typeof a.on_load)a.on_load()}function f(a){for(var b=Object.keys(a),d=0;d<b.length;d++)"function"==typeof a[b[d]]&&"function(){returntimeline.timelineVariable(varname);}"==
a[b[d]].toString().replace(/\s/g,"")&&(a[b[d]]=a[b[d]].call()),"object"==typeof a[b[d]]&&null!==a[b[d]]&&f(a[b[d]])}function e(a,b,d){var f=!0;if("undefined"!==typeof a.min_width||"undefined"!==typeof a.min_height){var c="undefined"!==typeof a.min_width?a.min_width:0,m="undefined"!==typeof a.min_height?a.min_height:0,h=window.innerHeight;if(window.innerWidth<c||h<m){f=!1;var k=setInterval(function(){var f=window.innerWidth,h=window.innerHeight;f<c||h<m?(f="<p>Your browser window is too small to complete this experiment. Please maximize the size of your browser window. If your browser window is already maximized, you will not be able to complete this experiment.</p><p>The minimum width is "+
c+"px. Your current width is "+f+"px.</p><p>The minimum height is "+m+"px. Your current height is "+h+"px.</p>",g.getDisplayElement().innerHTML=f):(clearInterval(k),g.getDisplayElement().innerHTML="",e(a,b,d))},100);return}}"undefined"===typeof a.audio||!a.audio||window.hasOwnProperty("AudioContext")||window.hasOwnProperty("webkitAudioContext")?f&&b():(f=!1,g.getDisplayElement().innerHTML="<p>Your browser does not support the WebAudio API, which means that you will not be able to complete the experiment.</p><p>Browsers that support the WebAudio API include Chrome, Firefox, Safari, and Edge.</p>",
d())}var g={},k={},h,n=0,l={},m=!1,p,r,u,E=!1,B=!1,t=!1,F=!1;g.webaudio_context=null;"undefined"!==typeof window&&window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext);g.webaudio_context="undefined"!==typeof window&&"undefined"!==typeof window.AudioContext?new AudioContext:null;g.ALL_KEYS="allkeys";g.NO_KEYS="none";g.init=function(a){"undefined"===typeof a.timeline&&console.error("No timeline declared in jsPsych.init. Cannot start experiment.");
h=null;n=0;l={};F=t=B=E=m=!1;jsPsych.data.reset();k=Object.assign({},{display_element:void 0,on_finish:function(a){},on_trial_start:function(a){},on_trial_finish:function(){},on_data_update:function(a){},on_interaction_data_update:function(a){},on_close:function(){},preload_images:[],preload_audio:[],preload_video:[],use_webaudio:!0,exclusions:{},show_progress_bar:!1,auto_update_progress_bar:!0,auto_preload:!0,show_preload_progress_bar:!0,max_load_time:6E4,max_preload_attempts:10,default_iti:0},a);
"undefined"==typeof k.display_element?(null===document.querySelector("body")&&document.documentElement.appendChild(document.createElement("body")),document.querySelector("html").style.height="100%",document.querySelector("body").style.margin="0px",document.querySelector("body").style.height="100%",document.querySelector("body").style.width="100%",k.display_element=document.querySelector("body")):(a=k.display_element instanceof Element?k.display_element:document.querySelector("#"+k.display_element),
null===a?console.error("The display_element specified in jsPsych.init() does not exist in the DOM."):k.display_element=a);k.display_element.innerHTML='<div class="jspsych-content-wrapper"><div id="jspsych-content"></div></div>';p=k.display_element;r=document.querySelector("#jspsych-content");k.display_element.tabIndex=0;-1==k.display_element.className.indexOf("jspsych-display-element")&&(k.display_element.className+=" jspsych-display-element");r.className+="jspsych-content";h=new c({timeline:k.timeline});
jsPsych.pluginAPI.initAudio();jsPsych.pluginAPI.reset(k.display_element);jsPsych.pluginAPI.createKeyboardEventListeners(k.display_element);jsPsych.data.createInteractionListeners();window.addEventListener("beforeunload",k.on_close);e(k.exclusions,function(){k.auto_preload?(jsPsych.pluginAPI.autoPreload(h,d,k.preload_images,k.preload_audio,k.preload_video,k.show_preload_progress_bar),0<k.max_load_time&&setTimeout(function(){t||F||g.loadFail()},k.max_load_time)):d()},function(){})};g.progress=function(){var a=
"undefined"==typeof h?0:h.percentComplete();return{total_trials:"undefined"==typeof h?void 0:h.length(),current_trial_global:n,percent_complete:a}};g.startTime=function(){return u};g.totalTime=function(){return"undefined"==typeof u?0:(new Date).getTime()-u.getTime()};g.getDisplayElement=function(){return r};g.getDisplayContainerElement=function(){return p};g.finishTrial=function(b){if(!m){m=!0;b="undefined"==typeof b?{}:b;jsPsych.data.write(b);b=jsPsych.data.get().filter({trial_index:n}).values()[0];
if("function"===typeof l.on_finish)l.on_finish(b);k.on_trial_finish(b);k.on_data_update(b);0<l.post_trial_gap?setTimeout(a,l.post_trial_gap):a()}};g.endExperiment=function(a){h.end_message=a;h.end();jsPsych.pluginAPI.cancelAllKeyboardResponses();jsPsych.pluginAPI.clearAllTimeouts();g.finishTrial()};g.endCurrentTimeline=function(){h.endActiveNode()};g.currentTrial=function(){return l};g.initSettings=function(){return k};g.currentTimelineNodeID=function(){return h.activeID()};g.timelineVariable=function(a,
b){return b?h.timelineVariable(a):function(){return h.timelineVariable(a)}};g.addNodeToEndOfTimeline=function(a,b){h.insert(a);"undefinded"!==typeof b&&(k.auto_preload?jsPsych.pluginAPI.autoPreload(h,b):b())};g.pauseExperiment=function(){E=!0};g.resumeExperiment=function(){E=!1;B&&(B=!1,a())};g.loadFail=function(a){F=!0;r.innerHTML=a||"<p>The experiment failed to load.</p>"};var G=0;g.setProgressBar=function(a){a=Math.max(Math.min(1,a),0);document.querySelector("#jspsych-progressbar-inner").style.width=
100*a+"%";G=a};g.getProgressBarCompleted=function(){return G};document.documentElement.setAttribute("jspsych","present");return g}();
jsPsych.plugins=function(){var c={parameterType:{BOOL:0,STRING:1,INT:2,FLOAT:3,FUNCTION:4,KEYCODE:5,SELECT:6,HTML_STRING:7,IMAGE:8,AUDIO:9,VIDEO:10,OBJECT:11,COMPLEX:12}};c.universalPluginParameters={data:{type:c.parameterType.OBJECT,pretty_name:"Data",default:{},description:"Data to add to this trial (key-value pairs)"},on_start:{type:c.parameterType.FUNCTION,pretty_name:"On start",default:function(){},description:"Function to execute when trial begins"},on_finish:{type:c.parameterType.FUNCTION,
pretty_name:"On finish",default:function(){},description:"Function to execute when trial is finished"},on_load:{type:c.parameterType.FUNCTION,pretty_name:"On load",default:function(){},description:"Function to execute after the trial has loaded"},post_trial_gap:{type:c.parameterType.INT,pretty_name:"Post trial gap",default:null,description:"Length of gap between the end of this trial and the start of the next trial"}};return c}();
jsPsych.data=function(){function c(a){var b={},e="undefined"===typeof a?[]:a;b.push=function(a){e.push(a);return b};b.join=function(a){e=e.concat(a.values());return b};b.top=function(){return 1>=e.length?b:c([e[e.length-1]])};b.first=function(a){"undefined"==typeof a&&(a=1);for(var b=[],d=0;d<a;d++)b.push(e[d]);return c(b)};b.last=function(a){"undefined"==typeof a&&(a=1);var b=[];for(a=e.length-a;a<e.length;a++)b.push(e[a]);return c(b)};b.values=function(){return e};b.count=function(){return e.length};
b.readOnly=function(){return c(jsPsych.utils.deepCopy(e))};b.addToAll=function(a){for(var d=0;d<e.length;d++)for(var f in a)e[d][f]=a[f];return b};b.addToLast=function(a){if(0!=e.length)for(var d in a)e[e.length-1][d]=a[d];return b};b.filter=function(a){a=Array.isArray(a)?jsPsych.utils.deepCopy(a):jsPsych.utils.deepCopy([a]);for(var b=[],d=0;d<e.length;d++){for(var f=!1,g=0;g<a.length;g++){for(var m=!0,h=Object.keys(a[g]),k=0;k<h.length;k++)if("undefined"===typeof e[d][h[k]]||e[d][h[k]]!=a[g][h[k]])m=
!1;if(m){f=!0;break}}f&&b.push(e[d])}return c(b)};b.filterCustom=function(a){for(var b=[],d=0;d<e.length;d++)a(e[d])&&b.push(e[d]);return c(b)};b.select=function(a){for(var b=[],f=0;f<e.length;f++)"undefined"!==typeof e[f][a]&&b.push(e[f][a]);a=d();a.values=b;return a};b.ignore=function(a){Array.isArray(a)||(a=[a]);for(var b=jsPsych.utils.deepCopy(e),d=0;d<b.length;d++)for(var f in a)delete b[d][a[f]];return c(b)};b.uniqueNames=function(){for(var a=[],b=0;b<e.length;b++)for(var d=Object.keys(e[b]),
f=0;f<d.length;f++)a.includes(d[f])||a.push(d[f]);return a};b.csv=function(){var a=e;a="object"!=typeof a?JSON.parse(a):a;for(var b="",d="",f=[],c=0,g=0;g<a.length;g++)for(var h in a[g]){var k=h+"";k='"'+k.replace(/"/g,'""')+'",';f.includes(h)||(f[c]=h,b+=k,c++)}b=b.slice(0,-1);d+=b+"\r\n";for(c=0;c<a.length;c++){b="";for(g=0;g<f.length;g++)b+='"'+(("undefined"===typeof a[c][f[g]]?"":a[c][f[g]])+"").replace(/"/g,'""')+'",';b=b.slice(0,-1);d+=b+"\r\n"}return d};b.json=function(a){return a?JSON.stringify(e,
null,"\t"):JSON.stringify(e)};b.localSave=function(a,d){if("JSON"==a||"json"==a)a=b.json();else if("CSV"==a||"csv"==a)a=b.csv();else throw Error('Invalid format specified for localSave. Must be "JSON" or "CSV".');a=new Blob([a],{type:"text/plain"});a="undefined"!==typeof window.webkitURL?window.webkitURL.createObjectURL(a):window.URL.createObjectURL(a);jsPsych.getDisplayElement().insertAdjacentHTML("beforeend",'<a id="jspsych-download-as-text-link" style="display:none;" download="'+d+'" href="'+a+
'">click to download</a>');document.getElementById("jspsych-download-as-text-link").click()};return b}function d(){var a={values:[],sum:function(){for(var b=0,d=0;d<a.values.length;d++)b+=a.values[d];return b},mean:function(){return a.sum()/a.count()},median:function(){if(0!=a.values.length){var b=a.values.slice(0).sort(function(a,b){return a-b}),d=Math.floor(b.length/2);return 0===b.length%2?(b[d]+b[d-1])/2:b[d]}},min:function(){return Math.min.apply(null,a.values)},max:function(){return Math.max.apply(null,
a.values)},count:function(){return a.values.length},variance:function(){for(var b=a.mean(),d=0,e=0;e<a.values.length;e++)d+=Math.pow(a.values[e]-b,2);return d/a.values.length},sd:function(){var b=a.variance();return Math.sqrt(b)},frequencies:function(){for(var b={},d=0;d<a.values.length;d++){var e=a.values[d];"undefined"==typeof b[e]?b[e]=1:b[e]++}return b},all:function(b){for(var d=0;d<a.values.length;d++)if(!b(a.values[d]))return!1;return!0},subset:function(b){for(var e=[],f=0;f<a.values.length;f++)b(a.values[f])&&
e.push(a.values[f]);b=d();b.values=e;return b}};return a}function a(){var a=window.location.search.substr(1).split("&");if(""==a)return{};for(var b={},d=0;d<a.length;++d){var e=a[d].split("=",2);b[e[0]]=1==e.length?"":decodeURIComponent(e[1].replace(/\+/g," "))}return b}var b={},f=c(),e=c(),g={},k;b.reset=function(){f=c();e=c()};b.get=function(){return f};b.getInteractionData=function(){return e};b.write=function(a){var b=jsPsych.progress(),d=jsPsych.currentTrial();b={trial_type:d.type,trial_index:b.current_trial_global,
time_elapsed:jsPsych.totalTime(),internal_node_id:jsPsych.currentTimelineNodeID()};a=Object.assign({},a,d.data,b,g);f.push(a)};b.addProperties=function(a){f.addToAll(a);g=Object.assign({},g,a)};b.addDataToLastTrial=function(a){f.addToLast(a)};b.getDataByTimelineNode=function(a){return f.filterCustom(function(b){return b.internal_node_id.slice(0,a.length)===a})};b.getLastTrialData=function(){return f.top()};b.getLastTimelineData=function(){var a=b.getLastTrialData().select("internal_node_id").values[0];
if("undefined"===typeof a)return c();a=a.substr(0,a.lastIndexOf("-"));return b.getDataByTimelineNode(a)};b.displayData=function(a){a="undefined"===typeof a?"json":a.toLowerCase();"json"!=a&&"csv"!=a&&(console.log("Invalid format declared for displayData function. Using json as default."),a="json");a="json"==a?f.json(!0):f.csv();jsPsych.getDisplayElement().innerHTML='<pre id="jspsych-data-display"></pre>';document.getElementById("jspsych-data-display").textContent=a};b.urlVariables=function(){"undefined"==
typeof k&&(k=a());return k};b.getURLVariable=function(b){"undefined"==typeof k&&(k=a());return k[b]};b.createInteractionListeners=function(){function a(){var a={event:document.isFullScreen||document.webkitIsFullScreen||document.mozIsFullScreen?"fullscreenenter":"fullscreenexit",trial:jsPsych.progress().current_trial_global,time:jsPsych.totalTime()};e.push(a);jsPsych.initSettings().on_interaction_data_update(a)}window.addEventListener("blur",function(){var a={event:"blur",trial:jsPsych.progress().current_trial_global,
time:jsPsych.totalTime()};e.push(a);jsPsych.initSettings().on_interaction_data_update(a)});window.addEventListener("focus",function(){var a={event:"focus",trial:jsPsych.progress().current_trial_global,time:jsPsych.totalTime()};e.push(a);jsPsych.initSettings().on_interaction_data_update(a)});document.addEventListener("fullscreenchange",a);document.addEventListener("mozfullscreenchange",a);document.addEventListener("webkitfullscreenchange",a)};b._customInsert=function(a){f=c(a)};b._fullreset=function(){b.reset();
g={}};return b}();
jsPsych.turk=function(){return{turkInfo:function(){var c={},d=function(a,d){d=d.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+d+"=([^&#]*)")).exec(a);return null==a?"":a[1]},a=d(window.location.href,"assignmentId")?window.location.href:document.referrer;["assignmentId","hitId","workerId","turkSubmitTo"].map(function(b){c[b]=unescape(d(a,b))});c.previewMode="ASSIGNMENT_ID_NOT_AVAILABLE"==c.assignmentId;c.outsideTurk=!c.previewMode&&""===c.hitId&&""==c.assignmentId&&""==c.workerId;
return turk_info=c},submitToTurk:function(c){var d=jsPsych.turk.turkInfo(),a=d.assignmentId;d=d.turkSubmitTo;if(a&&d){var b=[],f;for(f in c)c.hasOwnProperty(f)&&b.push(f+"="+escape(c[f]));b.push("assignmentId="+a);c=d+"/mturk/externalSubmit?"+b.join("&");window.location.href=c}}}}();
jsPsych.randomization=function(){function c(a){a=a.slice(0);for(var b=a.length,d,e;b;)e=Math.floor(Math.random()*b--),d=a[b],a[b]=a[e],a[e]=d;return a}var d={repeat:function(a,b,d){var e=Array.isArray(a),f=Array.isArray(b);if(!e)f?(b=[b[0]],console.log("Unclear parameters given to randomization.repeat. Multiple set sizes specified, but only one item exists to sample. Proceeding using the first set size.")):(a=[a],b=[b]);else if(!f){f=[];for(e=0;e<a.length;e++)f.push(b);b=f}else if(a.length!=b.length)if(console.warning("Unclear parameters given to randomization.repeat. Items and repetitions are unequal lengths. Behavior may not be as expected."),
b.length<a.length){f=[];for(e=0;e<a.length;e++)f.push(b);b=f}else b=repetions.slice(0,a.length);f=[];for(e=0;e<a.length;e++)for(var k=0;k<b[e];k++)null==a[e]||"object"!=typeof a[e]?f.push(a[e]):f.push(Object.assign({},a[e]));a=c(f);if(d)for(d=a,a={},b=0;b<d.length;b++)for(e=Object.keys(d[b]),f=0;f<e.length;f++)"undefined"===typeof a[e[f]]&&(a[e[f]]=[]),a[e[f]].push(d[b][e[f]]);return a},shuffle:function(a){return c(a)},shuffleNoRepeats:function(a,b){"undefined"==typeof b&&(b=function(a,b){return a===
b?!0:!1});a=c(a);for(var d=0;d<a.length-1;d++)if(b(a[d],a[d+1])){for(var e=Math.floor(Math.random()*(a.length-2))+1;b(a[d+1],a[e])||b(a[d+1],a[e+1])||b(a[d+1],a[e-1]);)e=Math.floor(Math.random()*(a.length-2))+1;var g=a[e];a[e]=a[d+1];a[d+1]=g}return a},sampleWithoutReplacement:function(a,b){b>a.length&&console.error("Cannot take a sample larger than the size of the set of items to sample.");return jsPsych.randomization.shuffle(a).slice(0,b)},sampleWithReplacement:function(a,b,d){var e=[];if("undefined"!==
typeof d){d.length!==a.length&&console.error("The length of the weights array must equal the length of the array to be sampled from.");for(var f=0,c=0;c<d.length;c++)f+=d[c];for(c=0;c<d.length;c++)e.push(d[c]/f)}else for(c=0;c<a.length;c++)e.push(1/a.length);d=[e[0]];for(c=1;c<e.length;c++)d.push(e[c]+d[c-1]);e=[];for(c=0;c<b;c++){f=Math.random();for(var h=0;f>d[h];)h++;e.push(a[h])}return e},factorial:function(a,b,f){for(var e=Object.keys(a),c=[],k=0;k<a[e[0]].length;k++)c.push({}),c[k][e[0]]=a[e[0]][k];
for(k=1;k<e.length;k++){for(var h=a[e[k]],n=c.length,l=0;l<n;l++)for(var m=c[l],p=0;p<h.length;p++){var r={};r[e[k]]=h[p];c.push(Object.assign({},m,r))}c.splice(0,n)}return d.repeat(c,"undefined"===typeof b?1:b,f)},randomID:function(a){var b="";a="undefined"==typeof a?32:a;for(var d=0;d<a;d++)b+="0123456789abcdefghjklmnopqrstuvwxyz"[Math.floor(35*Math.random())];return b}};return d}();
jsPsych.pluginAPI=function(){var c={},d=[],a={},b=function(b){for(var e=0;e<d.length;e++)d[e].fn(b);a[b.keyCode]=!0},f=function(b){a[b.keyCode]=!1};c.reset=function(e){d=[];a={};e.removeEventListener("keydown",b);e.removeEventListener("keyup",f)};c.createKeyboardEventListeners=function(a){a.addEventListener("keydown",b);a.addEventListener("keyup",f)};c.getKeyboardResponse=function(b){b.rt_method="undefined"===typeof b.rt_method?"performance":b.rt_method;"performance"!=b.rt_method&&"audio"!=b.rt_method&&
(console.log('Invalid RT method specified in getKeyboardResponse. Defaulting to "performance" method.'),b.rt_method="performance");if("performance"==b.rt_method)var e=performance.now();else"audio"==b.rt_method&&(e=b.audio_context_start_time);var f={type:"keydown",fn:function(g){if("performance"==b.rt_method)var k=performance.now();else"audio"==b.rt_method&&(k=b.audio_context.currentTime);var h=!1;if("undefined"===typeof b.valid_responses||b.valid_responses==jsPsych.ALL_KEYS)h=!0;else if(b.valid_responses!=
jsPsych.NO_KEYS)for(var m=0;m<b.valid_responses.length;m++)if("string"==typeof b.valid_responses[m]){var l=jsPsych.pluginAPI.convertKeyCharacterToKeyCode(b.valid_responses[m]);if("undefined"!==typeof l)g.keyCode==l&&(h=!0);else throw Error("Invalid key string specified for getKeyboardResponse");}else g.keyCode==b.valid_responses[m]&&(h=!0);"undefined"!=typeof b.allow_held_key&&b.allow_held_key||!h||"undefined"!==typeof a[g.keyCode]&&1==a[g.keyCode]&&(h=!1);h&&(g.preventDefault(),b.callback_function({key:g.keyCode,
rt:k-e}),d.includes(f)&&(b.persist||c.cancelKeyboardResponse(f)))}};d.push(f);return f};c.cancelKeyboardResponse=function(a){d.includes(a)&&d.splice(d.indexOf(a),1)};c.cancelAllKeyboardResponses=function(){d=[]};c.convertKeyCharacterToKeyCode=function(a){var b;a=a.toLowerCase();"undefined"!==typeof e[a]&&(b=e[a]);return b};c.convertKeyCodeToKeyCharacter=function(a){for(var b in Object.keys(e))if(e[Object.keys(e)[b]]==a)return Object.keys(e)[b]};c.compareKeys=function(a,b){"string"==typeof a&&(a=c.convertKeyCharacterToKeyCode(a));
"string"==typeof b&&(b=c.convertKeyCharacterToKeyCode(b));return a==b};var e={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,esc:27,space:32,spacebar:32," ":32,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,"0numpad":96,"1numpad":97,
"2numpad":98,"3numpad":99,"4numpad":100,"5numpad":101,"6numpad":102,"7numpad":103,"8numpad":104,"9numpad":105,multiply:106,plus:107,minus:109,decimal:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,"=":187,",":188,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221},g=[];c.setTimeout=function(a,b){a=setTimeout(a,b);g.push(a);return a};c.clearAllTimeouts=function(){for(var a=0;a<g.length;a++)clearTimeout(g[a]);g=[]};var k={};c.getVideoBuffer=function(a){return k[a]};
var h=null,n=[];c.initAudio=function(){h=!0===jsPsych.initSettings().use_webaudio?jsPsych.webaudio_context:null};c.audioContext=function(){null!==h&&"running"!==h.state&&h.resume();return h};c.getAudioBuffer=function(a){if("tmp"===n[a])console.error("Audio file failed to load in the time allotted.");else return n[a]};var l=[];c.preloadAudioFiles=function(a,b,d){function e(b,d){d=d||1;var f=new XMLHttpRequest;f.open("GET",b,!0);f.responseType="arraybuffer";f.onload=function(){h.decodeAudioData(f.response,
function(d){n[b]=d;g++;k(g);g==a.length&&l()},function(){console.error("Error loading audio file: "+m)})};f.onerror=function(){d<jsPsych.initSettings().max_preload_attempts?setTimeout(function(){e(b,d+1)},200):jsPsych.loadFail()};f.send()}function f(b,d){d=d||1;var e=new Audio;e.addEventListener("canplaythrough",function(){n[b]=e;g++;k(g);g==a.length&&l()});e.addEventListener("onerror",function(){d<jsPsych.initSettings().max_preload_attempts?setTimeout(function(){f(b,d+1)},200):jsPsych.loadFail()});
e.addEventListener("onstalled",function(){d<jsPsych.initSettings().max_preload_attempts?setTimeout(function(){f(b,d+1)},200):jsPsych.loadFail()});e.addEventListener("onabort",function(){d<jsPsych.initSettings().max_preload_attempts?setTimeout(function(){f(b,d+1)},200):jsPsych.loadFail()});e.src=b}a=jsPsych.utils.flatten(a);a=jsPsych.utils.unique(a);var g=0,k="undefined"===typeof d?function(){}:d,l="undefined"===typeof b?function(){}:b;if(0==a.length)l();else for(b=0;b<a.length;b++){var m=a[b];"undefined"!==
typeof n[m]?(g++,k(g),g==a.length&&l()):(n[m]="tmp",null!==c.audioContext()?e(m):f(m))}};c.preloadImages=function(a,b,d){function e(b,d){d=d||1;var k=new Image;k.onload=function(){f++;c(f);f===a.length&&g()};k.onerror=function(){d<jsPsych.initSettings().max_preload_attempts?setTimeout(function(){e(b,d+1)},200):jsPsych.loadFail()};k.src=b}a=jsPsych.utils.flatten(a);a=jsPsych.utils.unique(a);var f=0,c="undefined"===typeof d?function(){}:d,g="undefined"===typeof b?function(){}:b;if(0===a.length)g();
else for(b=0;b<a.length;b++)e(a[b])};c.preloadVideo=function(a,b,d){function e(b,d){d=d||1;var h=new XMLHttpRequest;h.open("GET",b,!0);h.responseType="blob";h.onload=function(){if(200===this.status||0===this.status)k[b]=URL.createObjectURL(this.response),f++,c(f),f===a.length&&g()};h.onerror=function(){d<jsPsych.initSettings().max_preload_attempts?setTimeout(function(){e(b,d+1)},200):jsPsych.loadFail()};h.send()}a=jsPsych.utils.flatten(a);a=jsPsych.utils.unique(a);var f=0,c=d?d:function(){},g=b?b:
function(){};if(0===a.length)g();else for(b=0;b<a.length;b++)e(a[b])};c.registerPreload=function(a,b,d,e){-1===["audio","image","video"].indexOf(d)&&console.error("Invalid media_type parameter for jsPsych.pluginAPI.registerPreload. Please check the plugin file.");l.push({plugin:a,parameter:b,media_type:d,conditional_function:e})};c.autoPreload=function(a,b,d,e,f,g){function k(){B++;if(g){var a=B/E*100;jsPsych.getDisplayElement().querySelector("#jspsych-loading-progress-bar").style.width=a+"%"}}d=
d||[];e=e||[];f=f||[];for(var h=0;h<l.length;h++)for(var m=l[h].parameter,n=l[h].media_type,r=l[h].conditional_function,p=a.trialsOfType(l[h].plugin),u=0;u<p.length;u++)!p[u][m]||"function"===typeof p[u][m]||r&&!r(p[u])||("image"===n?d=d.concat(jsPsych.utils.flatten([p[u][m]])):"audio"===n?e=e.concat(jsPsych.utils.flatten([p[u][m]])):"video"===n&&(f=f.concat(jsPsych.utils.flatten([p[u][m]]))));d=jsPsych.utils.unique(d);e=jsPsych.utils.unique(e);f=jsPsych.utils.unique(f);d=d.filter(function(a){return 0!=
a&&null!=a});e=e.filter(function(a){return 0!=a&&null!=a});f=f.filter(function(a){return 0!=a&&null!=a});var E=d.length+e.length+f.length,B=0;g&&(jsPsych.getDisplayElement().innerHTML="<div id='jspsych-loading-progress-bar-container' style='height: 10px; width: 300px; background-color: #ddd;'><div id='jspsych-loading-progress-bar' style='height: 10px; width: 0%; background-color: #777;'></div></div>");c.preloadImages(d,function(){c.preloadAudioFiles(e,function(){c.preloadVideo(f,function(){b()},k)},
k)},k)};c.hardware=function(a){a=new CustomEvent("jspsych",{detail:a});document.dispatchEvent(a)};c.hardwareConnected=!1;document.addEventListener("jspsych-activate",function(a){c.hardwareConnected=!0});return c}();
jsPsych.utils=function(){var c={flatten:function(d,a){a="undefined"===typeof a?[]:a;for(var b=0;b<d.length;b++)Array.isArray(d[b])?c.flatten(d[b],a):a.push(d[b]);return a},unique:function(d){for(var a=[],b=0;b<d.length;b++)d.indexOf(d[b])==b&&a.push(d[b]);return a},deepCopy:function(d){if(!d)return d;if(Array.isArray(d)){var a=[];for(var b=0;b<d.length;b++)a.push(c.deepCopy(d[b]));return a}if("object"===typeof d){a={};for(b in d)d.hasOwnProperty(b)&&(a[b]=c.deepCopy(d[b]));return a}return d}};return c}();
"function"!=typeof Object.assign&&(Object.assign=function(c,d){if(null==c)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(c),b=1;b<arguments.length;b++){var f=arguments[b];if(null!=f)for(var e in f)Object.prototype.hasOwnProperty.call(f,e)&&(a[e]=f[e])}return a});
Array.prototype.includes||(Array.prototype.includes=function(c,d){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");var a=Object(this),b=parseInt(a.length,10)||0;if(0===b)return!1;d=parseInt(d,10)||0;0<=d||(d=b+d,0>d&&(d=0));for(var f;d<b;){f=a[d];if(c===f||c!==c&&f!==f)return!0;d++}return!1});Array.isArray||(Array.isArray=function(c){return"[object Array]"===Object.prototype.toString.call(c)});jsPsych.plugins.animation=function(){var c={};jsPsych.pluginAPI.registerPreload("animation","stimuli","image");c.info={name:"animation",description:"",parameters:{stimuli:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Stimuli",default:void 0,array:!0,description:"The images to be displayed."},frame_time:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Frame time",default:250,description:"Duration to display each image."},frame_isi:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Frame gap",
default:0,description:"Length of gap to be shown between each image."},sequence_reps:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Sequence repetitions",default:1,description:"Number of times to show entire sequence."},choices:{type:jsPsych.plugins.parameterType.KEYCODE,pretty_name:"Choices",default:jsPsych.ALL_KEYS,array:!0,description:"Keys subject uses to respond to stimuli."},prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:null,description:"Any content here will be displayed below stimulus."}}};
c.trial=function(d,a){function b(){d.innerHTML='<img src="'+a.stimuli[e]+'" id="jspsych-animation-image"></img>';l=a.stimuli[e];h.push({stimulus:a.stimuli[e],time:performance.now()-k});null!==a.prompt&&(d.innerHTML+=a.prompt);0<a.frame_isi&&jsPsych.pluginAPI.setTimeout(function(){d.querySelector("#jspsych-animation-image").style.visibility="hidden";l="blank";h.push({stimulus:"blank",time:performance.now()-k})},a.frame_time)}var f=a.frame_time+a.frame_isi,e=-1,c=0,k=performance.now(),h=[],n=[],l="",
m=setInterval(function(){var f=!0;d.innerHTML="";e++;e==a.stimuli.length&&(e=0,c++,c>=a.sequence_reps&&(jsPsych.pluginAPI.cancelKeyboardResponse(p),f={animation_sequence:JSON.stringify(h),responses:JSON.stringify(n)},jsPsych.finishTrial(f),clearInterval(m),f=!1));f&&b()},f),p=jsPsych.pluginAPI.getKeyboardResponse({callback_function:function(a){n.push({key_press:a.key,rt:a.rt,stimulus:l});d.querySelector("#jspsych-animation-image").className+=" responded"},valid_responses:a.choices,rt_method:"performance",
persist:!0,allow_held_key:!1})};return c}();jsPsych.plugins["audio-button-response"]=function(){var c={};jsPsych.pluginAPI.registerPreload("audio-button-response","stimulus","audio");c.info={name:"audio-button-response",description:"",parameters:{stimulus:{type:jsPsych.plugins.parameterType.AUDIO,pretty_name:"Stimulus",default:void 0,description:"The audio to be played."},choices:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Choices",default:void 0,array:!0,description:"The button labels."},button_html:{type:jsPsych.plugins.parameterType.HTML_STRING,
pretty_name:"Button HTML",default:'<button class="jspsych-btn">%choice%</button>',array:!0,description:"Custom button. Can make your own style."},prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:null,description:"Any content here will be displayed below the stimulus."},trial_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Trial duration",default:null,description:"The maximum duration to wait for a response."},margin_vertical:{type:jsPsych.plugins.parameterType.STRING,
pretty_name:"Margin vertical",default:"0px",description:"Vertical margin of button."},margin_horizontal:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Margin horizontal",default:"8px",description:"Horizontal margin of button."},response_ends_trial:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Response ends trial",default:!0,description:"If true, the trial will end when user makes a response."},trial_ends_after_audio:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Trial ends after audio",
default:!1,description:"If true, then the trial will end as soon as the audio file finishes playing."}}};c.trial=function(d,a){function b(){null!==f?(e.stop(),e.onended=function(){}):(c.pause(),c.removeEventListener("ended",b));jsPsych.pluginAPI.clearAllTimeouts();var g={rt:m.rt,stimulus:a.stimulus,button_pressed:m.button};d.innerHTML="";jsPsych.finishTrial(g)}var f=jsPsych.pluginAPI.audioContext();if(null!==f){var e=f.createBufferSource();e.buffer=jsPsych.pluginAPI.getAudioBuffer(a.stimulus);e.connect(f.destination)}else{var c=
jsPsych.pluginAPI.getAudioBuffer(a.stimulus);c.currentTime=0}a.trial_ends_after_audio&&(null!==f?e.onended=function(){b()}:c.addEventListener("ended",b));var k=[];if(Array.isArray(a.button_html))a.button_html.length==a.choices.length?k=a.button_html:console.error("Error in image-button-response plugin. The length of the button_html array does not equal the length of the choices array");else for(var h=0;h<a.choices.length;h++)k.push(a.button_html);var n='<div id="jspsych-audio-button-response-btngroup">';
for(h=0;h<a.choices.length;h++){var l=k[h].replace(/%choice%/g,a.choices[h]);n+='<div class="jspsych-audio-button-response-button" style="cursor: pointer; display: inline-block; margin:'+a.margin_vertical+" "+a.margin_horizontal+'" id="jspsych-audio-button-response-button-'+h+'" data-choice="'+h+'">'+l+"</div>"}n+="</div>";null!==a.prompt&&(n+=a.prompt);d.innerHTML=n;for(h=0;h<a.choices.length;h++)d.querySelector("#jspsych-audio-button-response-button-"+h).addEventListener("click",function(d){d=d.currentTarget.getAttribute("data-choice");
var e=performance.now()-p;m.button=d;m.rt=e;d=document.querySelectorAll(".jspsych-audio-button-response-button button");for(e=0;e<d.length;e++)d[e].setAttribute("disabled","disabled");a.response_ends_trial&&b()});var m={rt:null,button:null},p=performance.now();null!==f?(startTime=f.currentTime,e.start(startTime)):c.play();null!==a.trial_duration&&jsPsych.pluginAPI.setTimeout(function(){b()},a.trial_duration)};return c}();jsPsych.plugins["audio-keyboard-response"]=function(){var c={};jsPsych.pluginAPI.registerPreload("audio-keyboard-response","stimulus","audio");c.info={name:"audio-keyboard-response",description:"",parameters:{stimulus:{type:jsPsych.plugins.parameterType.AUDIO,pretty_name:"Stimulus",default:void 0,description:"The audio to be played."},choices:{type:jsPsych.plugins.parameterType.KEYCODE,pretty_name:"Choices",array:!0,default:jsPsych.ALL_KEYS,description:"The keys the subject is allowed to press to respond to the stimulus."},
prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:null,description:"Any content here will be displayed below the stimulus."},trial_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Trial duration",default:null,description:"The maximum duration to wait for a response."},response_ends_trial:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Response ends trial",default:!0,description:"If true, the trial will end when user makes a response."},trial_ends_after_audio:{type:jsPsych.plugins.parameterType.BOOL,
pretty_name:"Trial ends after audio",default:!1,description:"If true, then the trial will end as soon as the audio file finishes playing."}}};c.trial=function(d,a){function b(){jsPsych.pluginAPI.clearAllTimeouts();null!==f?(e.stop(),e.onended=function(){}):(c.pause(),c.removeEventListener("ended",b));jsPsych.pluginAPI.cancelAllKeyboardResponses();null!==f&&null!==k.rt&&(k.rt=Math.round(1E3*k.rt));var g={rt:k.rt,stimulus:a.stimulus,key_press:k.key};d.innerHTML="";jsPsych.finishTrial(g)}var f=jsPsych.pluginAPI.audioContext();
if(null!==f){var e=f.createBufferSource();e.buffer=jsPsych.pluginAPI.getAudioBuffer(a.stimulus);e.connect(f.destination)}else{var c=jsPsych.pluginAPI.getAudioBuffer(a.stimulus);c.currentTime=0}a.trial_ends_after_audio&&(null!==f?e.onended=function(){b()}:c.addEventListener("ended",b));null!==a.prompt&&(d.innerHTML=a.prompt);var k={rt:null,key:null},h=function(d){null==k.key&&(k=d);a.response_ends_trial&&b()};null!==f?(startTime=f.currentTime,e.start(startTime)):c.play();null!==f?jsPsych.pluginAPI.getKeyboardResponse({callback_function:h,
valid_responses:a.choices,rt_method:"audio",persist:!1,allow_held_key:!1,audio_context:f,audio_context_start_time:startTime}):jsPsych.pluginAPI.getKeyboardResponse({callback_function:h,valid_responses:a.choices,rt_method:"performance",persist:!1,allow_held_key:!1});null!==a.trial_duration&&jsPsych.pluginAPI.setTimeout(function(){b()},a.trial_duration)};return c}();jsPsych.plugins["audio-slider-response"]=function(){var c={};jsPsych.pluginAPI.registerPreload("audio-slider-response","stimulus","audio");c.info={name:"audio-slider-response",description:"",parameters:{stimulus:{type:jsPsych.plugins.parameterType.AUDIO,pretty_name:"Stimulus",default:void 0,description:"The image to be displayed"},min:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Min slider",default:0,description:"Sets the minimum value of the slider."},max:{type:jsPsych.plugins.parameterType.INT,
pretty_name:"Max slider",default:100,description:"Sets the maximum value of the slider"},start:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Slider starting value",default:50,description:"Sets the starting value of the slider"},step:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Step",default:1,description:"Sets the step of the slider"},labels:{type:jsPsych.plugins.parameterType.HTML_STRING,pretty_name:"Labels",default:[],array:!0,description:"Labels of the slider."},button_label:{type:jsPsych.plugins.parameterType.STRING,
pretty_name:"Button label",default:"Continue",array:!1,description:"Label of the button to advance."},prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:null,description:"Any content here will be displayed below the slider."},trial_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Trial duration",default:null,description:"How long to show the trial."},response_ends_trial:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Response ends trial",default:!0,description:"If true, trial will end when user makes a response."}}};
c.trial=function(d,a){function b(){jsPsych.pluginAPI.clearAllTimeouts();null!==f?(e.stop(),e.onended=function(){}):(c.pause(),c.removeEventListener("ended",b));var g={rt:l.rt,stimulus:a.stimulus,response:l.response};d.innerHTML="";jsPsych.finishTrial(g)}var f=jsPsych.pluginAPI.audioContext();if(null!==f){var e=f.createBufferSource();e.buffer=jsPsych.pluginAPI.getAudioBuffer(a.stimulus);e.connect(f.destination)}else{var c=jsPsych.pluginAPI.getAudioBuffer(a.stimulus);c.currentTime=0}a.trial_ends_after_audio&&
(null!==f?e.onended=function(){b()}:c.addEventListener("ended",b));var k='<div id="jspsych-audio-slider-response-wrapper" style="margin: 100px 0px;"><div class="jspsych-audio-slider-response-container" style="position:relative;">'+('<input type="range" value="'+a.start+'" min="'+a.min+'" max="'+a.max+'" step="'+a.step+'" style="width: 100%;" id="jspsych-audio-slider-response-response"></input>');k+="<div>";for(var h=0;h<a.labels.length;h++){var n=100/(a.labels.length-1);k+='<div style="display: inline-block; position: absolute; left:'+
(100/(a.labels.length-1)*h-n/2)+"%; text-align: center; width: "+n+'%;">';k+='<span style="text-align: center; font-size: 80%;">'+a.labels[h]+"</span>";k+="</div>"}k+="</div></div></div>";null!==a.prompt&&(k+=a.prompt);k+='<button id="jspsych-audio-slider-response-next" class="jspsych-btn">'+a.button_label+"</button>";d.innerHTML=k;var l={rt:null,response:null};d.querySelector("#jspsych-audio-slider-response-next").addEventListener("click",function(){var e=performance.now();e-=m;null!==f&&(e=f.currentTime,
e=Math.round(1E3*(e-m)));l.rt=e;l.response=d.querySelector("#jspsych-audio-slider-response-response").value;a.response_ends_trial?b():d.querySelector("#jspsych-audio-slider-response-next").disabled=!0});var m=performance.now();null!==f?(m=f.currentTime,e.start(m)):c.play();null!==a.trial_duration&&jsPsych.pluginAPI.setTimeout(function(){b()},a.trial_duration)};return c}();jsPsych.plugins["call-function"]=function(){var c={};c.info={name:"call-function",description:"",parameters:{func:{type:jsPsych.plugins.parameterType.FUNCTION,pretty_name:"Function",default:void 0,description:"Function to call"},async:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Asynchronous",default:!1,description:"Is the function call asynchronous?"}}};c.trial=function(d,a){a.post_trial_gap=0;if(a.async)a.func(function(a){b=a;jsPsych.finishTrial({value:b})});else{var b=a.func();jsPsych.finishTrial({value:b})}};
return c}();jsPsych.plugins["categorize-animation"]=function(){var c={};jsPsych.pluginAPI.registerPreload("categorize-animation","stimuli","image");c.info={name:"categorize-animation",description:"",parameters:{stimuli:{type:jsPsych.plugins.parameterType.IMAGE,pretty_name:"Stimuli",default:void 0,description:"Array of paths to image files."},key_answer:{type:jsPsych.plugins.parameterType.KEYCODE,pretty_name:"Key answer",default:void 0,description:"The key to indicate correct response"},choices:{type:jsPsych.plugins.parameterType.KEYCODE,
pretty_name:"Choices",default:jsPsych.ALL_KEYS,array:!0,description:"The keys subject is allowed to press to respond to stimuli."},text_answer:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Text answer",default:null,description:"Text to describe correct answer."},correct_text:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Correct text",default:"Correct.",description:"String to show when subject gives correct answer"},incorrect_text:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Incorrect text",
default:"Wrong.",description:"String to show when subject gives incorrect answer."},frame_time:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Frame time",default:500,description:"Duration to display each image."},sequence_reps:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Sequence repetitions",default:1,description:"How many times to display entire sequence."},allow_response_before_complete:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Allow response before complete",default:!1,
description:"If true, subject can response before the animation sequence finishes"},feedback_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Feedback duration",default:2E3,description:"How long to show feedback"},prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:null,description:"Any content here will be displayed below the stimulus."}}};c.trial=function(d,a){var b=-1,f=0,e=!0,c=!1,k=!1,h,n=setInterval(function(){d.innerHTML="";b++;b==a.stimuli.length&&(b=
0,f++,-1!=a.sequence_reps&&f>=a.sequence_reps&&(e=!1));e&&(d.innerHTML+='<img src="'+a.stimuli[b]+'" class="jspsych-categorize-animation-stimulus"></img>');if(!c&&a.allow_response_before_complete)null!==a.prompt&&(d.innerHTML+=a.prompt);else if(c){var g="";g=h?a.correct_text.replace("%ANS%",a.text_answer):a.incorrect_text.replace("%ANS%",a.text_answer);d.innerHTML+=g;k||(k=!0,jsPsych.pluginAPI.setTimeout(function(){clearInterval(n);d.innerHTML="";jsPsych.finishTrial(l)},a.feedback_duration))}else e||
null===a.prompt||(d.innerHTML+=a.prompt)},a.frame_time),l={};var m=jsPsych.pluginAPI.getKeyboardResponse({callback_function:function(b){if(!a.allow_response_before_complete&&e)return!1;h=!1;a.key_answer==b.key&&(h=!0);c=!0;l={stimulus:JSON.stringify(a.stimuli),rt:b.rt,correct:h,key_press:b.key};jsPsych.pluginAPI.cancelKeyboardResponse(m)},valid_responses:a.choices,rt_method:"performance",persist:!0,allow_held_key:!1})};return c}();jsPsych.plugins["categorize-html"]=function(){var c={};c.info={name:"categorize-html",description:"",parameters:{stimulus:{type:jsPsych.plugins.parameterType.HTML_STRING,pretty_name:"Stimulus",default:void 0,description:"The HTML content to be displayed."},key_answer:{type:jsPsych.plugins.parameterType.KEYCODE,pretty_name:"Key answer",default:void 0,description:"The key to indicate the correct response."},choices:{type:jsPsych.plugins.parameterType.KEYCODE,pretty_name:"Choices",default:jsPsych.ALL_KEYS,
array:!0,description:"The keys the subject is allowed to press to respond to the stimulus."},text_answer:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Text answer",default:null,description:"Label that is associated with the correct answer."},correct_text:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Correct text",default:"<p class='feedback'>Correct</p>",description:"String to show when correct answer is given."},incorrect_text:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Incorrect text",
default:"<p class='feedback'>Incorrect</p>",description:"String to show when incorrect answer is given."},prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:null,description:"Any content here will be displayed below the stimulus."},force_correct_button_press:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Force correct button press",default:!1,description:"If set to true, then the subject must press the correct response key after feedback in order to advance to next trial."},
show_stim_with_feedback:{type:jsPsych.plugins.parameterType.BOOL,default:!0,no_function:!1,description:""},show_feedback_on_timeout:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Show feedback on timeout",default:!1,description:"If true, stimulus will be shown during feedback. If false, only the text feedback will be displayed during feedback."},timeout_message:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Timeout message",default:"<p>Please respond faster.</p>",description:"The message displayed on a timeout non-response."},
stimulus_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Stimulus duration",default:null,description:"How long to hide stimulus."},trial_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Trial duration",default:null,description:"How long to show trial"},feedback_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Feedback duration",default:2E3,description:"How long to show feedback."}}};c.trial=function(d,a){function b(b,e){if(e&&!a.show_feedback_on_timeout)d.innerHTML+=
a.timeout_message;else{a.show_stim_with_feedback&&(d.innerHTML='<div id="jspsych-categorize-html-stimulus" class="jspsych-categorize-html-stimulus">'+a.stimulus+"</div>");var c="";c=b?a.correct_text.replace("%ANS%",a.text_answer):a.incorrect_text.replace("%ANS%",a.text_answer);d.innerHTML+=c}a.force_correct_button_press&&!1===b&&(e&&a.show_feedback_on_timeout||!e)?jsPsych.pluginAPI.getKeyboardResponse({callback_function:function(a){d.innerHTML="";jsPsych.finishTrial(f)},valid_responses:[a.key_answer],
rt_method:"performance",persist:!1,allow_held_key:!1}):jsPsych.pluginAPI.setTimeout(function(){d.innerHTML="";jsPsych.finishTrial(f)},a.feedback_duration)}d.innerHTML='<div id="jspsych-categorize-html-stimulus" class="jspsych-categorize-html-stimulus">'+a.stimulus+"</div>";null!==a.stimulus_duration&&jsPsych.pluginAPI.setTimeout(function(){d.querySelector("#jspsych-categorize-html-stimulus").style.visibility="hidden"},a.stimulus_duration);null!==a.prompt&&(d.innerHTML+=a.prompt);var f={},e=function(e){jsPsych.pluginAPI.clearAllTimeouts();
jsPsych.pluginAPI.cancelAllKeyboardResponses();var c=!1;a.key_answer==e.key&&(c=!0);f={rt:e.rt,correct:c,stimulus:a.stimulus,key_press:e.key};d.innerHTML="";b(c,null==e.rt)};jsPsych.pluginAPI.getKeyboardResponse({callback_function:e,valid_responses:a.choices,rt_method:"performance",persist:!1,allow_held_key:!1});null!==a.trial_duration&&jsPsych.pluginAPI.setTimeout(function(){e({key:null,rt:null})},a.trial_duration)};return c}();jsPsych.plugins["categorize-image"]=function(){var c={};jsPsych.pluginAPI.registerPreload("categorize-image","stimulus","image");c.info={name:"categorize-image",description:"",parameters:{stimulus:{type:jsPsych.plugins.parameterType.IMAGE,pretty_name:"Stimulus",default:void 0,description:"The image content to be displayed."},key_answer:{type:jsPsych.plugins.parameterType.KEYCODE,pretty_name:"Key answer",default:void 0,description:"The key to indicate the correct response."},choices:{type:jsPsych.plugins.parameterType.KEYCODE,
pretty_name:"Choices",default:jsPsych.ALL_KEYS,array:!0,description:"The keys the subject is allowed to press to respond to the stimulus."},text_answer:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Text answer",default:null,description:"Label that is associated with the correct answer."},correct_text:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Correct text",default:"<p class='feedback'>Correct</p>",description:"String to show when correct answer is given."},incorrect_text:{type:jsPsych.plugins.parameterType.STRING,
pretty_name:"Incorrect text",default:"<p class='feedback'>Incorrect</p>",description:"String to show when incorrect answer is given."},prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:null,description:"Any content here will be displayed below the stimulus."},force_correct_button_press:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Force correct button press",default:!1,description:"If set to true, then the subject must press the correct response key after feedback in order to advance to next trial."},
show_stim_with_feedback:{type:jsPsych.plugins.parameterType.BOOL,default:!0,no_function:!1,description:""},show_feedback_on_timeout:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Show feedback on timeout",default:!1,description:"If true, stimulus will be shown during feedback. If false, only the text feedback will be displayed during feedback."},timeout_message:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Timeout message",default:"<p>Please respond faster.</p>",description:"The message displayed on a timeout non-response."},
stimulus_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Stimulus duration",default:null,description:"How long to hide stimulus."},trial_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Trial duration",default:null,description:"How long to show trial"},feedback_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Feedback duration",default:2E3,description:"How long to show feedback."}}};c.trial=function(d,a){function b(b,e){if(e&&!a.show_feedback_on_timeout)d.innerHTML+=
a.timeout_message;else{a.show_stim_with_feedback&&(d.innerHTML='<img id="jspsych-categorize-image-stimulus" class="jspsych-categorize-image-stimulus" src="'+a.stimulus+'"></img>');var c="";c=b?a.correct_text.replace("%ANS%",a.text_answer):a.incorrect_text.replace("%ANS%",a.text_answer);d.innerHTML+=c}a.force_correct_button_press&&!1===b&&(e&&a.show_feedback_on_timeout||!e)?jsPsych.pluginAPI.getKeyboardResponse({callback_function:function(a){d.innerHTML="";jsPsych.finishTrial(f)},valid_responses:[a.key_answer],
rt_method:"performance",persist:!1,allow_held_key:!1}):jsPsych.pluginAPI.setTimeout(function(){d.innerHTML="";jsPsych.finishTrial(f)},a.feedback_duration)}d.innerHTML='<img id="jspsych-categorize-image-stimulus" class="jspsych-categorize-image-stimulus" src="'+a.stimulus+'"></img>';null!==a.stimulus_duration&&jsPsych.pluginAPI.setTimeout(function(){d.querySelector("#jspsych-categorize-image-stimulus").style.visibility="hidden"},a.stimulus_duration);null!==a.prompt&&(d.innerHTML+=a.prompt);var f={},
e=function(e){jsPsych.pluginAPI.clearAllTimeouts();jsPsych.pluginAPI.cancelAllKeyboardResponses();var c=!1;a.key_answer==e.key&&(c=!0);f={rt:e.rt,correct:c,stimulus:a.stimulus,key_press:e.key};d.innerHTML="";b(c,null==e.rt)};jsPsych.pluginAPI.getKeyboardResponse({callback_function:e,valid_responses:a.choices,rt_method:"performance",persist:!1,allow_held_key:!1});null!==a.trial_duration&&jsPsych.pluginAPI.setTimeout(function(){e({key:null,rt:null})},a.trial_duration)};return c}();jsPsych.plugins["external-html"]=function(){function c(a,b,d){var e=new XMLHttpRequest;e.open("GET",b,!0);e.onload=function(){if(200==e.status||0==e.status)a.innerHTML=e.responseText,d()};e.send()}var d={};d.info={name:"external-html",description:"",parameters:{url:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"URL",default:void 0,description:"The url of the external html page"},cont_key:{type:jsPsych.plugins.parameterType.KEYCODE,pretty_name:"Continue key",default:null,description:"The key to continue to the next page."},
cont_btn:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Continue button",default:null,description:"The button to continue to the next page."},check_fn:{type:jsPsych.plugins.parameterType.FUNCTION,pretty_name:"Check function",default:function(){return!0},description:""},force_refresh:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Force refresh",default:!1,description:"Refresh page."},execute_script:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Execute scripts",default:!1,description:"If true, JS scripts on the external html file will be executed."}}};
d.trial=function(a,b){var d=b.url;b.force_refresh&&(d=b.url+"?t="+performance.now());c(a,d,function(){var d=performance.now(),c=function(){if(!b.check_fn||b.check_fn(a)){b.cont_key&&a.removeEventListener("keydown",l);var e={rt:performance.now()-d,url:b.url};a.innerHTML="";jsPsych.finishTrial(e)}};if(b.execute_script)for(var f=$jscomp.makeIterator(a.getElementsByTagName("script")),h=f.next();!h.done;h=f.next()){h=h.value;var n=document.createElement("script");n.text=h.text;h.parentNode.replaceChild(n,
h)}b.cont_btn&&a.querySelector("#"+b.cont_btn).addEventListener("click",c);if(b.cont_key){var l=function(a){a.which==b.cont_key&&c()};a.addEventListener("keydown",l)}})};return d}();jsPsych.plugins["free-sort"]=function(){var c={};jsPsych.pluginAPI.registerPreload("free-sort","stimuli","image");c.info={name:"free-sort",description:"",parameters:{stimuli:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Stimuli",default:void 0,array:!0,description:"Images to be displayed."},stim_height:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Stimulus height",default:100,description:"Height of images in pixels."},stim_width:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Stimulus width",
default:100,description:"Width of images in pixels"},sort_area_height:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Sort area height",default:800,description:"The height of the container that subjects can move the stimuli in."},sort_area_width:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Sort area width",default:800,description:"The width of the container that subjects can move the stimuli in."},prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:null,description:"It can be used to provide a reminder about the action the subject is supposed to take."},
prompt_location:{type:jsPsych.plugins.parameterType.SELECT,pretty_name:"Prompt location",options:["above","below"],default:"above",description:'Indicates whether to show prompt "above" or "below" the sorting area.'},button_label:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Button label",default:"Continue",description:"The text that appears on the button to continue to the next trial."}}};c.trial=function(d,a){var b=performance.now(),c="";null!==a.prompt&&"above"==a.prompt_location&&(c+=
a.prompt);c+='<div id="jspsych-free-sort-arena" class="jspsych-free-sort-arena" style="position: relative; width:'+a.sort_area_width+"px; height:"+a.sort_area_height+'px; border:2px solid #444;"></div>';null!==a.prompt&&"below"==a.prompt_location&&(c+=a.prompt);d.innerHTML=c;var e=[];for(c=0;c<a.stimuli.length;c++){var g=Math.floor(Math.random()*(a.sort_area_width-a.stim_width-1)),k=Math.floor(Math.random()*(a.sort_area_height-a.stim_height-1));d.querySelector("#jspsych-free-sort-arena").innerHTML+=
'<img src="'+a.stimuli[c]+'" data-src="'+a.stimuli[c]+'" class="jspsych-free-sort-draggable" draggable="false" style="position: absolute; cursor: move; width:'+a.stim_width+"px; height:"+a.stim_height+"px; top:"+k+"px; left:"+g+'px;"></img>';e.push({src:a.stimuli[c],x:g,y:k})}d.innerHTML+='<button id="jspsych-free-sort-done-btn" class="jspsych-btn">'+a.button_label+"</button>";var h=1,n=[];g=d.querySelectorAll(".jspsych-free-sort-draggable");for(c=0;c<g.length;c++)g[c].addEventListener("mousedown",
function(b){var d=b.pageX-b.currentTarget.offsetLeft,e=b.pageY-b.currentTarget.offsetTop-window.scrollY,c=b.currentTarget;c.style.zIndex=++h;var f=function(b){c.style.top=Math.min(a.sort_area_height-a.stim_height,Math.max(0,b.clientY-e))+"px";c.style.left=Math.min(a.sort_area_width-a.stim_width,Math.max(0,b.clientX-d))+"px"};document.addEventListener("mousemove",f);var g=function(a){document.removeEventListener("mousemove",f);n.push({src:c.dataset.src,x:c.offsetLeft,y:c.offsetTop});document.removeEventListener("mouseup",
g)};document.addEventListener("mouseup",g)});d.querySelector("#jspsych-free-sort-done-btn").addEventListener("click",function(){for(var a=performance.now()-b,c=[],f=d.querySelectorAll(".jspsych-free-sort-draggable"),g=0;g<f.length;g++)c.push({src:f[g].dataset.src,x:parseInt(f[g].style.left),y:parseInt(f[g].style.top)});a={init_locations:JSON.stringify(e),moves:JSON.stringify(n),final_locations:JSON.stringify(c),rt:a};d.innerHTML="";jsPsych.finishTrial(a)})};return c}();jsPsych.plugins.fullscreen=function(){var c={};c.info={name:"fullscreen",description:"",parameters:{fullscreen_mode:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Fullscreen mode",default:!0,array:!1,description:"If true, experiment will enter fullscreen mode. If false, the browser will exit fullscreen mode."},message:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Message",default:"<p>The experiment will switch to full screen mode when you press the button below</p>",array:!1,description:"HTML content to display above the button to enter fullscreen mode."},
button_label:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Button label",default:"Continue",array:!1,description:"The text that appears on the button to enter fullscreen."},delay_after:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Delay after",default:1E3,array:!1,description:"The length of time to delay after entering fullscreen mode before ending the trial."}}};c.trial=function(d,a){function b(){d.innerHTML="";jsPsych.pluginAPI.setTimeout(function(){jsPsych.finishTrial({success:!c})},
a.delay_after)}var c="undefined"!==typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element;c?b():a.fullscreen_mode?(d.innerHTML=a.message+'<button id="jspsych-fullscreen-btn" class="jspsych-btn">'+a.button_label+"</button>",d.querySelector("#jspsych-fullscreen-btn").addEventListener("click",function(){var a=document.documentElement;a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen();
b()})):(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),b())};return c}();jsPsych.plugins["html-button-response"]=function(){var c={};c.info={name:"html-button-response",description:"",parameters:{stimulus:{type:jsPsych.plugins.parameterType.HTML_STRING,pretty_name:"Stimulus",default:void 0,description:"The HTML string to be displayed"},choices:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Choices",default:void 0,array:!0,description:"The labels for the buttons."},button_html:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Button HTML",default:'<button class="jspsych-btn">%choice%</button>',
array:!0,description:"The html of the button. Can create own style."},prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:null,description:"Any content here will be displayed under the button."},stimulus_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Stimulus duration",default:null,description:"How long to hide the stimulus."},trial_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Trial duration",default:null,description:"How long to show the trial."},
margin_vertical:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Margin vertical",default:"0px",description:"The vertical margin of the button."},margin_horizontal:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Margin horizontal",default:"8px",description:"The horizontal margin of the button."},response_ends_trial:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Response ends trial",default:!0,description:"If true, then trial will end when user responds."}}};c.trial=function(d,
a){function b(){jsPsych.pluginAPI.clearAllTimeouts();var b={rt:n.rt,stimulus:a.stimulus,button_pressed:n.button};d.innerHTML="";jsPsych.finishTrial(b)}var c='<div id="jspsych-html-button-response-stimulus">'+a.stimulus+"</div>",e=[];if(Array.isArray(a.button_html))a.button_html.length==a.choices.length?e=a.button_html:console.error("Error in html-button-response plugin. The length of the button_html array does not equal the length of the choices array");else for(var g=0;g<a.choices.length;g++)e.push(a.button_html);
c+='<div id="jspsych-html-button-response-btngroup">';for(g=0;g<a.choices.length;g++){var k=e[g].replace(/%choice%/g,a.choices[g]);c+='<div class="jspsych-html-button-response-button" style="display: inline-block; margin:'+a.margin_vertical+" "+a.margin_horizontal+'" id="jspsych-html-button-response-button-'+g+'" data-choice="'+g+'">'+k+"</div>"}c+="</div>";null!==a.prompt&&(c+=a.prompt);d.innerHTML=c;var h=performance.now();for(g=0;g<a.choices.length;g++)d.querySelector("#jspsych-html-button-response-button-"+
g).addEventListener("click",function(e){e=e.currentTarget.getAttribute("data-choice");var c=performance.now()-h;n.button=e;n.rt=c;d.querySelector("#jspsych-html-button-response-stimulus").className+=" responded";e=document.querySelectorAll(".jspsych-html-button-response-button button");for(c=0;c<e.length;c++)e[c].setAttribute("disabled","disabled");a.response_ends_trial&&b()});var n={rt:null,button:null};null!==a.stimulus_duration&&jsPsych.pluginAPI.setTimeout(function(){d.querySelector("#jspsych-html-button-response-stimulus").style.visibility=
"hidden"},a.stimulus_duration);null!==a.trial_duration&&jsPsych.pluginAPI.setTimeout(function(){b()},a.trial_duration)};return c}();jsPsych.plugins["html-keyboard-response"]=function(){var c={};c.info={name:"html-keyboard-response",description:"",parameters:{stimulus:{type:jsPsych.plugins.parameterType.HTML_STRING,pretty_name:"Stimulus",default:void 0,description:"The HTML string to be displayed"},choices:{type:jsPsych.plugins.parameterType.KEYCODE,array:!0,pretty_name:"Choices",default:jsPsych.ALL_KEYS,description:"The keys the subject is allowed to press to respond to the stimulus."},prompt:{type:jsPsych.plugins.parameterType.STRING,
pretty_name:"Prompt",default:null,description:"Any content here will be displayed below the stimulus."},stimulus_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Stimulus duration",default:null,description:"How long to hide the stimulus."},trial_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Trial duration",default:null,description:"How long to show trial before it ends."},response_ends_trial:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Response ends trial",default:!0,
description:"If true, trial will end when subject makes a response."}}};c.trial=function(d,a){var b='<div id="jspsych-html-keyboard-response-stimulus">'+a.stimulus+"</div>";null!==a.prompt&&(b+=a.prompt);d.innerHTML=b;var c={rt:null,key:null},e=function(){jsPsych.pluginAPI.clearAllTimeouts();"undefined"!==typeof g&&jsPsych.pluginAPI.cancelKeyboardResponse(g);var b={rt:c.rt,stimulus:a.stimulus,key_press:c.key};d.innerHTML="";jsPsych.finishTrial(b)};b=function(b){d.querySelector("#jspsych-html-keyboard-response-stimulus").className+=
" responded";null==c.key&&(c=b);a.response_ends_trial&&e()};if(a.choices!=jsPsych.NO_KEYS)var g=jsPsych.pluginAPI.getKeyboardResponse({callback_function:b,valid_responses:a.choices,rt_method:"performance",persist:!1,allow_held_key:!1});null!==a.stimulus_duration&&jsPsych.pluginAPI.setTimeout(function(){d.querySelector("#jspsych-html-keyboard-response-stimulus").style.visibility="hidden"},a.stimulus_duration);null!==a.trial_duration&&jsPsych.pluginAPI.setTimeout(function(){e()},a.trial_duration)};
return c}();jsPsych.plugins["html-slider-response"]=function(){var c={};c.info={name:"html-slider-response",description:"",parameters:{stimulus:{type:jsPsych.plugins.parameterType.HTML_STRING,pretty_name:"Stimulus",default:void 0,description:"The HTML string to be displayed"},min:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Min slider",default:0,description:"Sets the minimum value of the slider."},max:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Max slider",default:100,description:"Sets the maximum value of the slider"},
start:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Slider starting value",default:50,description:"Sets the starting value of the slider"},step:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Step",default:1,description:"Sets the step of the slider"},labels:{type:jsPsych.plugins.parameterType.HTML_STRING,pretty_name:"Labels",default:[],array:!0,description:"Labels of the slider."},button_label:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Button label",default:"Continue",array:!1,
description:"Label of the button to advance."},prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:null,description:"Any content here will be displayed below the slider."},stimulus_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Stimulus duration",default:null,description:"How long to hide the stimulus."},trial_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Trial duration",default:null,description:"How long to show the trial."},response_ends_trial:{type:jsPsych.plugins.parameterType.BOOL,
pretty_name:"Response ends trial",default:!0,description:"If true, trial will end when user makes a response."}}};c.trial=function(d,a){function b(){jsPsych.pluginAPI.clearAllTimeouts();var b={rt:k.rt,response:k.response,stimulus:a.stimulus};d.innerHTML="";jsPsych.finishTrial(b)}var c='<div id="jspsych-html-slider-response-wrapper" style="margin: 100px 0px;">'+('<div id="jspsych-html-slider-response-stimulus">'+a.stimulus+"</div>");c=c+'<div class="jspsych-html-slider-response-container" style="position:relative;">'+
('<input type="range" value="'+a.start+'" min="'+a.min+'" max="'+a.max+'" step="'+a.step+'" style="width: 100%;" id="jspsych-html-slider-response-response"></input>');c+="<div>";for(var e=0;e<a.labels.length;e++){var g=100/(a.labels.length-1);c+='<div style="display: inline-block; position: absolute; left:'+(100/(a.labels.length-1)*e-g/2)+"%; text-align: center; width: "+g+'%;">';c+='<span style="text-align: center; font-size: 80%;">'+a.labels[e]+"</span>";c+="</div>"}c+="</div></div></div>";null!==
a.prompt&&(c+=a.prompt);c+='<button id="jspsych-html-slider-response-next" class="jspsych-btn">'+a.button_label+"</button>";d.innerHTML=c;var k={rt:null,response:null};d.querySelector("#jspsych-html-slider-response-next").addEventListener("click",function(){var e=performance.now();k.rt=e-h;k.response=d.querySelector("#jspsych-html-slider-response-response").value;a.response_ends_trial?b():d.querySelector("#jspsych-html-slider-response-next").disabled=!0});null!==a.stimulus_duration&&jsPsych.pluginAPI.setTimeout(function(){d.querySelector("#jspsych-html-slider-response-stimulus").style.visibility=
"hidden"},a.stimulus_duration);null!==a.trial_duration&&jsPsych.pluginAPI.setTimeout(function(){b()},a.trial_duration);var h=performance.now()};return c}();jsPsych.plugins["iat-html"]=function(){var c={};c.info={name:"iat-html",description:"",parameters:{stimulus:{type:jsPsych.plugins.parameterType.HTML_STRING,pretty_name:"Stimulus",default:void 0,description:"The HTML string to be displayed."},left_category_key:{type:jsPsych.plugins.parameterType.HTML_STRING,pretty_name:"Left category key",default:"E",description:"Key press that is associated with the left category label."},right_category_key:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Right category key",
default:"I",description:"Key press that is associated with the right category label."},left_category_label:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Left category label",array:!0,default:["left"],description:"The label that is associated with the stimulus. Aligned to the left side of page."},right_category_label:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Right category label",array:!0,default:["right"],description:"The label that is associated with the stimulus. Aligned to the right side of the page."},
key_to_move_forward:{type:jsPsych.plugins.parameterType.KEYCODE,pretty_name:"Key to move forward",array:!0,default:jsPsych.ALL_KEYS,description:"The keys that allow the user to advance to the next trial if their key press was incorrect."},display_feedback:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Display feedback",default:!1,description:"If true, then html when wrong will be displayed when user makes an incorrect key press."},html_when_wrong:{type:jsPsych.plugins.parameterType.HTML_STRING,
pretty_name:"HTML when wrong",default:'<span style="color: red; font-size: 80px">X</span>',description:"The image to display when a user presses the wrong key."},bottom_instructions:{type:jsPsych.plugins.parameterType.HTML_STRING,pretty_name:"Bottom instructions",default:"<p>If you press the wrong key, a red X will appear. Press any key to continue.</p>",description:"Instructions shown at the bottom of the page."},force_correct_key_press:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Force correct key press",
default:!1,description:"If true, in order to advance to the next trial after a wrong key press the user will be forced to press the correct key."},stim_key_association:{type:jsPsych.plugins.parameterType.HTML_STRING,pretty_name:"Stimulus key association",options:["left","right"],default:"undefined",description:'Stimulus will be associated with eight "left" or "right".'},response_ends_trial:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Response ends trial",default:!0,description:"If true, trial will end when user makes a response."},
trial_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Trial duration",default:null,description:"How long to show the trial."}}};c.trial=function(d,a){var b=""+("<div style='position: absolute; height: 20%; width: 100%; margin-left: auto; margin-right: auto; top: 42%; left: 0; right: 0'><p id='jspsych-iat-stim'>"+a.stimulus+"</p></div>");b+="<div id='trial_left_align' style='position: absolute; top: 18%; left: 20%'>";b=1==a.left_category_label.length?b+("<p>Press "+a.left_category_key+
" for:<br> "+a.left_category_label[0].bold()+"</p></div>"):b+("<p>Press "+a.left_category_key+" for:<br> "+a.left_category_label[0].bold()+"<br>or<br>"+a.left_category_label[1].bold()+"</p></div>");b+="<div id='trial_right_align' style='position: absolute; top: 18%; right: 20%'>";b=1==a.right_category_label.length?b+("<p>Press "+a.right_category_key+" for:<br> "+a.right_category_label[0].bold()+"</p></div>"):b+("<p>Press "+a.right_category_key+" for:<br> "+a.right_category_label[0].bold()+"<br>or<br>"+
a.right_category_label[1].bold()+"</p></div>");b+="<div id='wrongImgID' style='position:relative; top: 300px; margin-left: auto; margin-right: auto; left: 0; right: 0'>";!0===a.display_feedback&&(b+="<div id='wrongImgContainer' style='visibility: hidden; position: absolute; top: -75px; margin-left: auto; margin-right: auto; left: 0; right: 0'><p>"+a.html_when_wrong+"</p></div>");b+="<div>"+a.bottom_instructions+"</div>";d.innerHTML=b+"</div>";var c={rt:null,key:null,correct:!1},e=function(){jsPsych.pluginAPI.clearAllTimeouts();
"undefined"!==typeof h&&jsPsych.pluginAPI.cancelKeyboardResponse(h);var b={rt:c.rt,stimulus:a.stimulus,key_press:c.key,correct:c.correct};d.innerHTML="";jsPsych.finishTrial(b)},g=jsPsych.pluginAPI.convertKeyCharacterToKeyCode(a.left_category_key),k=jsPsych.pluginAPI.convertKeyCharacterToKeyCode(a.right_category_key);b=function(b){var f=document.getElementById("wrongImgContainer");d.querySelector("#jspsych-iat-stim").className+=" responded";null==c.key&&(c=b);"right"==a.stim_key_association?null!==
c.rt&&c.key==k?(c.correct=!0,a.response_ends_trial&&e()):(c.correct=!1,a.response_ends_trial||1!=a.display_feedback||(f.style.visibility="visible"),a.response_ends_trial&&1==a.display_feedback?(f.style.visibility="visible",a.force_correct_key_press?jsPsych.pluginAPI.getKeyboardResponse({callback_function:e,valid_responses:[a.right_category_key]}):jsPsych.pluginAPI.getKeyboardResponse({callback_function:e,valid_responses:a.key_to_move_forward})):a.response_ends_trial&&1!=a.display_feedback&&jsPsych.pluginAPI.getKeyboardResponse({callback_function:e,
valid_responses:[jsPsych.ALL_KEYS]})):"left"==a.stim_key_association&&(null!==c.rt&&c.key==g?(c.correct=!0,a.response_ends_trial&&e()):(c.correct=!1,a.response_ends_trial||1!=a.display_feedback||(f.style.visibility="visible"),a.response_ends_trial&&1==a.display_feedback?(f.style.visibility="visible",a.force_correct_key_press?jsPsych.pluginAPI.getKeyboardResponse({callback_function:e,valid_responses:[a.left_category_key]}):jsPsych.pluginAPI.getKeyboardResponse({callback_function:e,valid_responses:a.key_to_move_forward})):
a.response_ends_trial&&1!=a.display_feedback&&jsPsych.pluginAPI.getKeyboardResponse({callback_function:e,valid_responses:[jsPsych.ALL_KEYS]})))};if(a.left_category_key!=jsPsych.NO_KEYS&&a.right_category_key!=jsPsych.NO_KEYS)var h=jsPsych.pluginAPI.getKeyboardResponse({callback_function:b,valid_responses:[a.left_category_key,a.right_category_key],rt_method:"performance",persist:!1,allow_held_key:!1});null!==a.trial_duration&&1!=a.response_ends_trial&&jsPsych.pluginAPI.setTimeout(function(){e()},a.trial_duration)};
return c}();jsPsych.plugins["iat-image"]=function(){var c={};jsPsych.pluginAPI.registerPreload("iat-image","stimulus","image");c.info={name:"iat-image",description:"",parameters:{stimulus:{type:jsPsych.plugins.parameterType.IMAGE,pretty_name:"Stimulus",default:void 0,description:"The image to be displayed"},left_category_key:{type:jsPsych.plugins.parameterType.HTML_STRING,pretty_name:"Left category key",default:"E",description:"Key press that is associated with the left category label."},right_category_key:{type:jsPsych.plugins.parameterType.STRING,
pretty_name:"Right category key",default:"I",description:"Key press that is associated with the right category label."},left_category_label:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Left category label",array:!0,default:["left"],description:"The label that is associated with the stimulus. Aligned to the left side of page."},right_category_label:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Right category label",array:!0,default:["right"],description:"The label that is associated with the stimulus. Aligned to the right side of the page."},
key_to_move_forward:{type:jsPsych.plugins.parameterType.KEYCODE,pretty_name:"Key to move forward",array:!0,default:jsPsych.ALL_KEYS,description:"The keys that allow the user to advance to the next trial if their key press was incorrect."},display_feedback:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Display feedback",default:!1,description:"If true, then html when wrong will be displayed when user makes an incorrect key press."},html_when_wrong:{type:jsPsych.plugins.parameterType.HTML_STRING,
pretty_name:"HTML when wrong",default:'<span style="color: red; font-size: 80px">X</span>',description:"The image to display when a user presses the wrong key."},bottom_instructions:{type:jsPsych.plugins.parameterType.HTML_STRING,pretty_name:"Bottom instructions",default:"<p>If you press the wrong key, a red X will appear. Press any key to continue.</p>",description:"Instructions shown at the bottom of the page."},force_correct_key_press:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Force correct key press",
default:!1,description:"If true, in order to advance to the next trial after a wrong key press the user will be forced to press the correct key."},stim_key_association:{type:jsPsych.plugins.parameterType.HTML_STRING,pretty_name:"Stimulus key association",options:["left","right"],default:"undefined",description:'Stimulus will be associated with eight "left" or "right".'},response_ends_trial:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Response ends trial",default:!0,description:"If true, trial will end when user makes a response."},
trial_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Trial duration",default:null,description:"How long to show the trial."}}};c.trial=function(d,a){var b=""+("<div style='position: absolute; height: 20%; width: 100%; margin-left: auto; margin-right: auto; top: 42%; left: 0; right: 0'><img src='"+a.stimulus+"' id='jspsych-iat-stim'></img></div>");b+="<div id='trial_left_align' style='position: absolute; top: 18%; left: 20%'>";b=1==a.left_category_label.length?b+("<p>Press "+a.left_category_key+
" for:<br> "+a.left_category_label[0].bold()+"</p></div>"):b+("<p>Press "+a.left_category_key+" for:<br> "+a.left_category_label[0].bold()+"<br>or<br>"+a.left_category_label[1].bold()+"</p></div>");b+="<div id='trial_right_align' style='position: absolute; top: 18%; right: 20%'>";b=1==a.right_category_label.length?b+("<p>Press "+a.right_category_key+" for:<br> "+a.right_category_label[0].bold()+"</p></div>"):b+("<p>Press "+a.right_category_key+" for:<br> "+a.right_category_label[0].bold()+"<br>or<br>"+
a.right_category_label[1].bold()+"</p></div>");b+="<div id='wrongImgID' style='position:relative; top: 300px; margin-left: auto; margin-right: auto; left: 0; right: 0'>";!0===a.display_feedback&&(b+="<div id='wrongImgContainer' style='visibility: hidden; position: absolute; top: -75px; margin-left: auto; margin-right: auto; left: 0; right: 0'><p>"+a.html_when_wrong+"</p></div>");b+="<div>"+a.bottom_instructions+"</div>";d.innerHTML=b+"</div>";var c={rt:null,key:null,correct:!1},e=function(){jsPsych.pluginAPI.clearAllTimeouts();
"undefined"!==typeof h&&jsPsych.pluginAPI.cancelKeyboardResponse(h);var b={rt:c.rt,stimulus:a.stimulus,key_press:c.key,correct:c.correct};d.innerHTML="";jsPsych.finishTrial(b)},g=jsPsych.pluginAPI.convertKeyCharacterToKeyCode(a.left_category_key),k=jsPsych.pluginAPI.convertKeyCharacterToKeyCode(a.right_category_key);b=function(b){var f=document.getElementById("wrongImgContainer");d.querySelector("#jspsych-iat-stim").className+=" responded";null==c.key&&(c=b);"right"==a.stim_key_association?null!==
c.rt&&c.key==k?(c.correct=!0,a.response_ends_trial&&e()):(c.correct=!1,a.response_ends_trial||1!=a.display_feedback||(f.style.visibility="visible"),a.response_ends_trial&&1==a.display_feedback?(f.style.visibility="visible",a.force_correct_key_press?jsPsych.pluginAPI.getKeyboardResponse({callback_function:e,valid_responses:[a.right_category_key]}):jsPsych.pluginAPI.getKeyboardResponse({callback_function:e,valid_responses:a.key_to_move_forward})):a.response_ends_trial&&1!=a.display_feedback&&jsPsych.pluginAPI.getKeyboardResponse({callback_function:e,
valid_responses:[jsPsych.ALL_KEYS]})):"left"==a.stim_key_association&&(null!==c.rt&&c.key==g?(c.correct=!0,a.response_ends_trial&&e()):(c.correct=!1,a.response_ends_trial||1!=a.display_feedback||(f.style.visibility="visible"),a.response_ends_trial&&1==a.display_feedback?(f.style.visibility="visible",a.force_correct_key_press?jsPsych.pluginAPI.getKeyboardResponse({callback_function:e,valid_responses:[a.left_category_key]}):jsPsych.pluginAPI.getKeyboardResponse({callback_function:e,valid_responses:a.key_to_move_forward})):
a.response_ends_trial&&1!=a.display_feedback&&jsPsych.pluginAPI.getKeyboardResponse({callback_function:e,valid_responses:[jsPsych.ALL_KEYS]})))};if(a.left_category_key!=jsPsych.NO_KEYS&&a.right_category_key!=jsPsych.NO_KEYS)var h=jsPsych.pluginAPI.getKeyboardResponse({callback_function:b,valid_responses:[a.left_category_key,a.right_category_key],rt_method:"performance",persist:!1,allow_held_key:!1});null!==a.trial_duration&&1!=a.response_ends_trial&&jsPsych.pluginAPI.setTimeout(function(){e()},a.trial_duration)};
return c}();jsPsych.plugins["image-button-response"]=function(){var c={};jsPsych.pluginAPI.registerPreload("image-button-response","stimulus","image");c.info={name:"image-button-response",description:"",parameters:{stimulus:{type:jsPsych.plugins.parameterType.IMAGE,pretty_name:"Stimulus",default:void 0,description:"The image to be displayed"},choices:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Choices",default:void 0,array:!0,description:"The labels for the buttons."},button_html:{type:jsPsych.plugins.parameterType.STRING,
pretty_name:"Button HTML",default:'<button class="jspsych-btn">%choice%</button>',array:!0,description:"The html of the button. Can create own style."},prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:null,description:"Any content here will be displayed under the button."},stimulus_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Stimulus duration",default:null,description:"How long to hide the stimulus."},trial_duration:{type:jsPsych.plugins.parameterType.INT,
pretty_name:"Trial duration",default:null,description:"How long to show the trial."},margin_vertical:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Margin vertical",default:"0px",description:"The vertical margin of the button."},margin_horizontal:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Margin horizontal",default:"8px",description:"The horizontal margin of the button."},response_ends_trial:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Response ends trial",default:!0,
description:"If true, then trial will end when user responds."}}};c.trial=function(d,a){function b(){jsPsych.pluginAPI.clearAllTimeouts();var b={rt:n.rt,stimulus:a.stimulus,button_pressed:n.button};d.innerHTML="";jsPsych.finishTrial(b)}"undefined"===typeof a.choices&&console.error('Required parameter "choices" missing in image-button-response');"undefined"===typeof a.stimulus&&console.error('Required parameter "stimulus" missing in image-button-response');var c='<img src="'+a.stimulus+'" id="jspsych-image-button-response-stimulus"></img>',
e=[];if(Array.isArray(a.button_html))a.button_html.length==a.choices.length?e=a.button_html:console.error("Error in image-button-response plugin. The length of the button_html array does not equal the length of the choices array");else for(var g=0;g<a.choices.length;g++)e.push(a.button_html);c+='<div id="jspsych-image-button-response-btngroup">';for(g=0;g<a.choices.length;g++){var k=e[g].replace(/%choice%/g,a.choices[g]);c+='<div class="jspsych-image-button-response-button" style="display: inline-block; margin:'+
a.margin_vertical+" "+a.margin_horizontal+'" id="jspsych-image-button-response-button-'+g+'" data-choice="'+g+'">'+k+"</div>"}c+="</div>";null!==a.prompt&&(c+=a.prompt);d.innerHTML=c;var h=performance.now();for(g=0;g<a.choices.length;g++)d.querySelector("#jspsych-image-button-response-button-"+g).addEventListener("click",function(c){c=c.currentTarget.getAttribute("data-choice");var e=performance.now()-h;n.button=c;n.rt=e;d.querySelector("#jspsych-image-button-response-stimulus").className+=" responded";
c=document.querySelectorAll(".jspsych-image-button-response-button button");for(e=0;e<c.length;e++)c[e].setAttribute("disabled","disabled");a.response_ends_trial&&b()});var n={rt:null,button:null};null!==a.stimulus_duration&&jsPsych.pluginAPI.setTimeout(function(){d.querySelector("#jspsych-image-button-response-stimulus").style.visibility="hidden"},a.stimulus_duration);null!==a.trial_duration&&jsPsych.pluginAPI.setTimeout(function(){b()},a.trial_duration)};return c}();jsPsych.plugins["image-keyboard-response"]=function(){var c={};jsPsych.pluginAPI.registerPreload("image-keyboard-response","stimulus","image");c.info={name:"image-keyboard-response",description:"",parameters:{stimulus:{type:jsPsych.plugins.parameterType.IMAGE,pretty_name:"Stimulus",default:void 0,description:"The image to be displayed"},choices:{type:jsPsych.plugins.parameterType.KEYCODE,array:!0,pretty_name:"Choices",default:jsPsych.ALL_KEYS,description:"The keys the subject is allowed to press to respond to the stimulus."},
prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:null,description:"Any content here will be displayed below the stimulus."},stimulus_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Stimulus duration",default:null,description:"How long to hide the stimulus."},trial_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Trial duration",default:null,description:"How long to show trial before it ends."},response_ends_trial:{type:jsPsych.plugins.parameterType.BOOL,
pretty_name:"Response ends trial",default:!0,description:"If true, trial will end when subject makes a response."}}};c.trial=function(d,a){var b='<img src="'+a.stimulus+'" id="jspsych-image-keyboard-response-stimulus"></img>';null!==a.prompt&&(b+=a.prompt);d.innerHTML=b;var c={rt:null,key:null},e=function(){jsPsych.pluginAPI.clearAllTimeouts();"undefined"!==typeof g&&jsPsych.pluginAPI.cancelKeyboardResponse(g);var b={rt:c.rt,stimulus:a.stimulus,key_press:c.key};d.innerHTML="";jsPsych.finishTrial(b)};
b=function(b){d.querySelector("#jspsych-image-keyboard-response-stimulus").className+=" responded";null==c.key&&(c=b);a.response_ends_trial&&e()};if(a.choices!=jsPsych.NO_KEYS)var g=jsPsych.pluginAPI.getKeyboardResponse({callback_function:b,valid_responses:a.choices,rt_method:"performance",persist:!1,allow_held_key:!1});null!==a.stimulus_duration&&jsPsych.pluginAPI.setTimeout(function(){d.querySelector("#jspsych-image-keyboard-response-stimulus").style.visibility="hidden"},a.stimulus_duration);null!==
a.trial_duration&&jsPsych.pluginAPI.setTimeout(function(){e()},a.trial_duration)};return c}();jsPsych.plugins["image-slider-response"]=function(){var c={};jsPsych.pluginAPI.registerPreload("image-slider-response","stimulus","image");c.info={name:"image-slider-response",description:"",parameters:{stimulus:{type:jsPsych.plugins.parameterType.IMAGE,pretty_name:"Stimulus",default:void 0,description:"The image to be displayed"},min:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Min slider",default:0,description:"Sets the minimum value of the slider."},max:{type:jsPsych.plugins.parameterType.INT,
pretty_name:"Max slider",default:100,description:"Sets the maximum value of the slider"},start:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Slider starting value",default:50,description:"Sets the starting value of the slider"},step:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Step",default:1,description:"Sets the step of the slider"},labels:{type:jsPsych.plugins.parameterType.HTML_STRING,pretty_name:"Labels",default:[],array:!0,description:"Labels of the slider."},button_label:{type:jsPsych.plugins.parameterType.STRING,
pretty_name:"Button label",default:"Continue",array:!1,description:"Label of the button to advance."},prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:null,description:"Any content here will be displayed below the slider."},stimulus_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Stimulus duration",default:null,description:"How long to hide the stimulus."},trial_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Trial duration",default:null,description:"How long to show the trial."},
response_ends_trial:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Response ends trial",default:!0,description:"If true, trial will end when user makes a response."}}};c.trial=function(d,a){function b(){jsPsych.pluginAPI.clearAllTimeouts();var a={rt:k.rt,response:k.response};d.innerHTML="";jsPsych.finishTrial(a)}var c='<div id="jspsych-image-slider-response-wrapper" style="margin: 100px 0px;">'+('<div id="jspsych-image-slider-response-stimulus"><img src="'+a.stimulus+'"></div>');c=c+'<div class="jspsych-image-slider-response-container" style="position:relative;">'+
('<input type="range" value="'+a.start+'" min="'+a.min+'" max="'+a.max+'" step="'+a.step+'" style="width: 100%;" id="jspsych-image-slider-response-response"></input>');c+="<div>";for(var e=0;e<a.labels.length;e++){var g=100/(a.labels.length-1);c+='<div style="display: inline-block; position: absolute; left:'+(100/(a.labels.length-1)*e-g/2)+"%; text-align: center; width: "+g+'%;">';c+='<span style="text-align: center; font-size: 80%;">'+a.labels[e]+"</span>";c+="</div>"}c+="</div></div></div>";null!==
a.prompt&&(c+=a.prompt);c+='<button id="jspsych-image-slider-response-next" class="jspsych-btn">'+a.button_label+"</button>";d.innerHTML=c;var k={rt:null,response:null};d.querySelector("#jspsych-image-slider-response-next").addEventListener("click",function(){var c=performance.now();k.rt=c-h;k.response=d.querySelector("#jspsych-image-slider-response-response").value;a.response_ends_trial?b():d.querySelector("#jspsych-image-slider-response-next").disabled=!0});null!==a.stimulus_duration&&jsPsych.pluginAPI.setTimeout(function(){d.querySelector("#jspsych-image-slider-response-stimulus").style.visibility=
"hidden"},a.stimulus_duration);null!==a.trial_duration&&jsPsych.pluginAPI.setTimeout(function(){b()},a.trial_duration);var h=performance.now()};return c}();jsPsych.plugins.instructions=function(){var c={};c.info={name:"instructions",description:"",parameters:{pages:{type:jsPsych.plugins.parameterType.HTML_STRING,pretty_name:"Pages",default:void 0,array:!0,description:"Each element of the array is the content for a single page."},key_forward:{type:jsPsych.plugins.parameterType.KEYCODE,pretty_name:"Key forward",default:"rightarrow",description:"The key the subject can press in order to advance to the next page."},key_backward:{type:jsPsych.plugins.parameterType.KEYCODE,
pretty_name:"Key backward",default:"leftarrow",description:"The key that the subject can press to return to the previous page."},allow_backward:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Allow backward",default:!0,description:"If true, the subject can return to the previous page of the instructions."},allow_keys:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Allow keys",default:!0,description:"If true, the subject can use keyboard keys to navigate the pages."},show_clickable_nav:{type:jsPsych.plugins.parameterType.BOOL,
pretty_name:"Show clickable nav",default:!1,description:'If true, then a "Previous" and "Next" button will be displayed beneath the instructions.'},show_page_number:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Show page number",default:!1,description:"If true, and clickable navigation is enabled, then Page x/y will be shown between the nav buttons."},button_label_previous:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Button label previous",default:"Previous",description:"The text that appears on the button to go backwards."},
button_label_next:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Button label next",default:"Next",description:"The text that appears on the button to go forwards."}}};c.trial=function(d,a){function b(a){a.target.removeEventListener("click",b);"jspsych-instructions-back"===this.id?(g(),k--,c()):"jspsych-instructions-next"===this.id&&e()}function c(){var c=a.pages[k],e="";a.show_page_number&&(e="<span style='margin: 0 1em;' class='jspsych-instructions-pagenum'>Page "+(k+1)+"/"+a.pages.length+
"</span>");if(a.show_clickable_nav){var f="<div class='jspsych-instructions-nav' style='padding: 10px 0px;'>";a.allow_backward&&(f+="<button id='jspsych-instructions-back' class='jspsych-btn' style='margin-right: 5px;' "+(0<k?"":"disabled='disabled'")+">&lt; "+a.button_label_previous+"</button>");1<a.pages.length&&a.show_page_number&&(f+=e);f+="<button id='jspsych-instructions-next' class='jspsych-btn'style='margin-left: 5px;'>"+a.button_label_next+" &gt;</button></div>";d.innerHTML=c+f;0!=k&&a.allow_backward&&
d.querySelector("#jspsych-instructions-back").addEventListener("click",b);d.querySelector("#jspsych-instructions-next").addEventListener("click",b)}else a.show_page_number&&1<a.pages.length&&(c+="<div class='jspsych-instructions-pagenum'>"+e+"</div>"),d.innerHTML=c}function e(){g();k++;if(k>=a.pages.length){a.allow_keys&&jsPsych.pluginAPI.cancelKeyboardResponse(p);d.innerHTML="";var b={view_history:JSON.stringify(h),rt:performance.now()-n};jsPsych.finishTrial(b)}else c()}function g(){var a=performance.now();
h.push({page_index:k,viewing_time:a-l});l=a}var k=0,h=[],n=performance.now(),l=n,m=function(b){p=jsPsych.pluginAPI.getKeyboardResponse({callback_function:m,valid_responses:[a.key_forward,a.key_backward],rt_method:"performance",persist:!1,allow_held_key:!1});jsPsych.pluginAPI.compareKeys(b.key,a.key_backward)&&0!==k&&a.allow_backward&&(g(),k--,c());jsPsych.pluginAPI.compareKeys(b.key,a.key_forward)&&e()};c();if(a.allow_keys)var p=jsPsych.pluginAPI.getKeyboardResponse({callback_function:m,valid_responses:[a.key_forward,
a.key_backward],rt_method:"performance",persist:!1})};return c}();jsPsych.plugins.RDK=function(){var c={};c.info={name:"RDK",parameters:{choices:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Choices",default:[],array:!0,description:"The valid keys that the subject can press to indicate a response"},correct_choice:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Correct choice",default:void 0,array:!0,description:"The correct keys for that trial"},trial_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Trial duration",default:500,description:"The length of stimulus presentation"},
response_ends_trial:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Response ends trial",default:!0,description:"If true, then any valid key will end the trial"},number_of_apertures:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Number of apertures",default:1,description:"The number of RDK apertures (If more than one, make sure to separate them by setting aperture_center_x and aperture_center_y for each RDK)"},number_of_dots:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Number of dots",
default:300,description:"The number of dots per set in the stimulus"},number_of_sets:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Number of sets",default:1,description:"The number of sets of dots to cycle through"},coherent_direction:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Coherent direction",default:0,description:"The direction of coherent motion in degrees"},coherence:{type:jsPsych.plugins.parameterType.FLOAT,pretty_name:"Coherence",default:.5,description:"The percentage of dots moving in the coherent direction"},
opposite_coherence:{type:jsPsych.plugins.parameterType.FLOAT,pretty_name:"Opposite coherence",default:0,description:"The percentage of dots moving in the direction opposite of the coherent direction"},dot_radius:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Dot radius",default:2,description:"The radius of the dots in pixels"},dot_life:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Dot life",default:-1,description:"The number of frames that pass before each dot disappears and reappears somewhere else"},
move_distance:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Move distance",default:1,description:"The distance in pixels each dot moves per frame"},aperture_width:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Aperture width",default:600,description:"The width of the aperture in pixels"},aperture_height:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Aperture height",default:400,description:"The height of the aperture in pixels"},dot_color:{type:jsPsych.plugins.parameterType.STRING,
pretty_name:"Dot color",default:"white",description:"The color of the dots"},background_color:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Background color",default:"gray",description:"The background of the stimulus"},RDK_type:{type:jsPsych.plugins.parameterType.INT,pretty_name:"RDK type",default:3,description:"The Type of RDK (refer to documentation for details)"},aperture_type:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Aperture Type",default:2,description:"The shape of the aperture"},
reinsert_type:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Reinsert type",default:2,description:"The reinsertion rule for dots that move out of the aperture"},aperture_center_x:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Aperture center X",default:window.innerWidth/2,description:"The x-coordinate of the center of the aperture"},aperture_center_y:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Aperture center Y",default:window.innerHeight/2,description:"The y-coordinate of the center of the aperture"},
fixation_cross:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Fixation cross",default:!1,description:"If true, then a fixation cross will be present in the middle of the screen"},fixation_cross_width:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Fixation cross width",default:20,description:"The width of the fixation cross in pixels"},fixation_cross_height:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Fixation cross height",default:20,description:"The height of the fixation cross in pixels"},
fixation_cross_color:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Fixation cross color",default:"black",description:"The color of the fixation cross"},fixation_cross_thickness:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Fixation cross thickness",default:1,description:"The thickness of the fixation cross"},border:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Border",default:!1,description:"The presence of a border around the aperture"},border_thickness:{type:jsPsych.plugins.parameterType.INT,
pretty_name:"Border width",default:1,description:"The thickness of the border in pixels"},border_color:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Border Color",default:1,description:"The color of the border"}}};c.trial=function(d,a){function b(){pa=!0;qa=N.length;var b=N;N=0<N.length?N.reduce(function(a,b){return a+b})/N.length:0;"undefined"!==typeof la&&jsPsych.pluginAPI.cancelKeyboardResponse(la);b={rt:I.rt,key_press:I.key,correct:e(),choices:a.choices,correct_choice:a.correct_choice,
trial_duration:a.trial_duration,response_ends_trial:a.response_ends_trial,number_of_apertures:a.number_of_apertures,number_of_dots:a.number_of_dots,number_of_sets:a.number_of_sets,coherent_direction:a.coherent_direction,coherence:a.coherence,opposite_coherence:a.opposite_coherence,dot_radius:a.dot_radius,dot_life:a.dot_life,move_distance:a.move_distance,aperture_width:a.aperture_width,aperture_height:a.aperture_height,dot_color:a.dot_color,background_color:a.background_color,RDK_type:a.RDK_type,aperture_type:a.aperture_type,
reinsert_type:a.reinsert_type,frame_rate:N,frame_rate_array:JSON.stringify(b),number_of_frames:qa,aperture_center_x:a.aperture_center_x,aperture_center_y:a.aperture_center_y,fixation_cross:a.fixation_cross,fixation_cross_width:a.fixation_cross_width,fixation_cross_height:a.fixation_cross_height,fixation_cross_color:a.fixation_cross_color,fixation_cross_thickness:a.fixation_cross_thickness,border:a.border,border_thickness:a.border_thickness,border_color:a.border_color,canvas_width:S,canvas_height:T};
d.innerHTML="";J.style.margin=va;J.style.padding=wa;J.style.backgroundColor=xa;jsPsych.finishTrial(b)}function c(d){-1==I.key&&(I=d);a.response_ends_trial&&(window.clearTimeout(ra),b())}function e(){if("undefined"!==typeof a.correct_choice)if(a.correct_choice.constructor===Array){if("string"===typeof a.correct_choice[0]||a.correct_choice[0]instanceof String)return a.correct_choice=a.correct_choice.map(function(a){return a.toUpperCase()}),a.correct_choice.includes(String.fromCharCode(I.key));if("number"===
typeof a.correct_choice[0])return a.correct_choice.includes(I.key)}else{if("string"===typeof a.correct_choice||a.correct_choice instanceof String)return I.key==a.correct_choice.toUpperCase().charCodeAt(0);if("number"===typeof a.correct_choice)return console.log(I.key==a.correct_choice),I.key==a.correct_choice}}function g(a){if(a.constructor===Array&&a.length===F)return a;if(a.constructor!==Array){for(var b=[],d=0;d<F;d++)b.push(a);return b}a.constructor===Array&&a.length!==F?console.error("If you have more than one aperture, please ensure that arrays that are passed in as parameters are the same length as the number of apertures. Else you can use a single value without the array"):
console.error("A parameter is incorrectly set. Please ensure that the nApertures parameter is set to the correct value (if using more than one aperture), and all others parameters are set correctly.")}function k(){G=ya[q];K=za[q];U=Aa[q];P=Ba[q];oa=Ca[q];V=Da[q];R=Ea[q];L=Fa[q];W=Ga[q];ea=Ha[q];ha=Ia[q];C=Ja[q];D=Ka[q];M=RDKArray[q];w=apertureTypeArray[q];ja=reinsertTypeArray[q];ka=fixationCrossArray[q];X=fixationCrossWidthArray[q];Y=fixationCrossHeightArray[q];Z=fixationCrossColorArray[q];aa=fixationCrossThicknessArray[q];
ma=borderArray[q];H=borderThicknessArray[q];ba=borderColorArray[q];sa=L*Math.cos(U*Math.PI/180);ta=L*Math.sin(-U*Math.PI/180);if(1==w||3==w)z=A=W/2;else if(2==w||4==w)z=W/2,A=ea/2;ca=G*P;da=0!==na.length?na[q]:void 0}function h(){for(var a=[],b=0;b<K;b++)a.push(n());return a}function n(){for(var a=[],b=0;b<G;b++){var d={x:0,y:0,vx:0,vy:0,vx2:0,vy2:0,latestXMove:0,latestYMove:0,lifeCount:Math.floor(B(0,R)),updateType:""};d=E(d);1==M&&(b<ca?(d=l(d),d.updateType="constant direction"):d.updateType="random position");
2==M&&(b<ca?(d=l(d),d.updateType="constant direction"):d.updateType="random walk");3==M&&(b<ca?(d=l(d),d.updateType="constant direction"):(m(d),d.updateType="random direction"));4==M&&(d=l(d),d.updateType="constant direction or random position");5==M&&(d=l(d),d.updateType="constant direction or random walk");6==M&&(d=l(d),m(d),d.updateType="constant direction or random direction");a.push(d)}return a}function l(a){a.vx=sa;a.vy=ta;return a}function m(a){var b=B(-Math.PI,Math.PI);a.vx2=Math.cos(b)*L;
a.vy2=-Math.sin(b)*L;return a}function p(a){a.x+=a.vx;a.y+=a.vy;a.latestXMove=a.vx;a.latestYMove=a.vy;return a}function r(a){var b=B(-Math.PI,Math.PI);a.latestXMove=Math.cos(b)*L;a.latestYMove=-Math.sin(b)*L;a.x+=a.latestXMove;a.y+=a.latestYMove;return a}function u(a){a.x+=a.vx2;a.y+=a.vy2;a.latestXMove=a.vx2;a.latestYMove=a.vy2;return a}function E(a){if(1==w||2==w){var b=B(-Math.PI,Math.PI),d=Math.random();x=Math.sqrt(d)*Math.cos(b);y=Math.sqrt(d)*Math.sin(b);x=x*z+C;y=y*A+D;a.x=x;a.y=y}else if(3==
w||4==w)a.x=B(C-z,C+z),a.y=B(D-A,D+A);return a}function B(a,b){return a+Math.random()*(b-a)}function t(a,b){return"undefined"!==typeof a?a:b}a.choices=t(a.choices,[]);a.correct_choice=t(a.correct_choice,void 0);a.trial_duration=t(a.trial_duration,500);a.response_ends_trial=t(a.response_ends_trial,!0);a.number_of_apertures=t(a.number_of_apertures,1);a.number_of_dots=t(a.number_of_dots,300);a.number_of_sets=t(a.number_of_sets,1);a.coherent_direction=t(a.coherent_direction,0);a.coherence=t(a.coherence,
.5);a.opposite_coherence=t(a.opposite_coherence,0);a.dot_radius=t(a.dot_radius,2);a.dot_life=t(a.dot_life,-1);a.move_distance=t(a.move_distance,1);a.aperture_width=t(a.aperture_width,600);a.aperture_height=t(a.aperture_height,400);a.dot_color=t(a.dot_color,"white");a.background_color=t(a.background_color,"gray");a.RDK_type=t(a.RDK_type,3);a.aperture_type=t(a.aperture_type,2);a.reinsert_type=t(a.reinsert_type,2);a.aperture_center_x=t(a.aperture_center_x,window.innerWidth/2);a.aperture_center_y=t(a.aperture_center_y,
window.innerHeight/2);a.fixation_cross=t(a.fixation_cross,!1);a.fixation_cross_width=t(a.fixation_cross_width,20);a.fixation_cross_height=t(a.fixation_cross_height,20);a.fixation_cross_color=t(a.fixation_cross_color,"black");a.fixation_cross_thickness=t(a.fixation_cross_thickness,1);a.border=t(a.border,!1);a.border_thickness=t(a.border_thickness,1);a.border_color=t(a.borderColor,"black");if(1==w||3==w)a.aperture_height=a.aperture_width;var F=a.number_of_apertures,G=a.number_of_dots,K=a.number_of_sets,
U=a.coherent_direction,P=a.coherence,oa=a.opposite_coherence,V=a.dot_radius,R=a.dot_life,L=a.move_distance,W=a.aperture_width,ea=a.aperture_height,ha=a.dot_color,ia=a.background_color,C=a.aperture_center_x,D=a.aperture_center_y,M=a.RDK_type,w=a.aperture_type,ja=a.reinsert_type,ka=a.fixation_cross,X=a.fixation_cross_width,Y=a.fixation_cross_height,Z=a.fixation_cross_color,aa=a.fixation_cross_thickness,ma=a.border,H=a.border_thickness,ba=a.border_color,O=document.createElement("canvas");d.appendChild(O);
var J=document.getElementsByClassName("jspsych-display-element")[0],va=J.style.margin,wa=J.style.padding,xa=J.style.backgroundColor;J.style.margin=0;J.style.padding=0;J.style.backgroundColor=ia;O.style.margin=0;O.style.padding=0;var v=O.getContext("2d"),S=O.width=window.innerWidth,T=O.height=window.innerHeight;O.style.backgroundColor=ia;var q,na=[];var ya=g(G);var za=g(K);var Aa=g(U);var Ba=g(P);var Ca=g(oa);var Da=g(V);var Ea=g(R);var Fa=g(L);var Ga=g(W);var Ha=g(ea);var Ia=g(ha);var Ja=g(C);var Ka=
g(D);RDKArray=g(M);apertureTypeArray=g(w);reinsertTypeArray=g(ja);fixationCrossArray=g(ka);fixationCrossWidthArray=g(X);fixationCrossHeightArray=g(Y);fixationCrossColorArray=g(Z);fixationCrossThicknessArray=g(aa);borderArray=g(ma);borderThicknessArray=g(H);borderColorArray=g(ba);var Q=g(0);for(q=0;q<F;q++)k(),na.push(h());var z,A,sa,ta,ca,da,pa=!1,ua=!1,I={rt:-1,key:-1},ra,la,N=[],qa=0;(function(){function d(){if(pa)window.cancelAnimationFrame(e);else{e=window.requestAnimationFrame(d);!ua&&0<a.trial_duration&&
(ra=window.setTimeout(b,a.trial_duration),ua=!0);for(q=0;q<F;q++){k(q);for(var c=da[Q[q]],g=0;g<G;g++)dot=c[g],v.beginPath(),v.arc(dot.x,dot.y,V+1,0,2*Math.PI),v.fillStyle=ia,v.fill()}for(q=0;q<F;q++)for(k(q),Q[q]=Q[q]==K-1?0:Q[q]+1,c=da[Q[q]],g=0;g<G;g++){var h=c[g];"constant direction"==h.updateType?h=p(h):"random position"==h.updateType?h=E(h):"random walk"==h.updateType?h=r(h):"random direction"==h.updateType?h=u(h):"constant direction or random position"==h.updateType?h=Math.random()<P?p(h):
E(h):"constant direction or random walk"==h.updateType?h=Math.random()<P?p(h):r(h):"constant direction or random direction"==h.updateType&&(h=Math.random()<P?p(h):u(h));h.lifeCount++;var l=h;0>R?(l.lifeCount=0,l=!1):l.lifeCount>=R?(l.lifeCount=0,l=!0):l=!1;l&&(h=E(h));if(1==w||2==w){l=h.x;var m=h.y;m-=D;(l=l<-z*Math.sqrt(1-Math.pow(m,2)/Math.pow(A,2))+C)||(l=h.x,m=h.y,m-=D,l=l>z*Math.sqrt(1-Math.pow(m,2)/Math.pow(A,2))+C);l||(l=h.y,m=h.x,m-=C,l=l<-A*Math.sqrt(1-Math.pow(m,2)/Math.pow(z,2))+D);l||
(l=h.y,m=h.x,m-=C,l=l>A*Math.sqrt(1-Math.pow(m,2)/Math.pow(z,2))+D);l=l?!0:!1}else l=3==w||4==w?h.x<C-z||h.x>C+z||h.y<D-A||h.y>D+A?!0:!1:void 0;if(l)switch(ja){case 1:E(h);break;case 2:if(1==w||2==w)h.x-=h.latestXMove,h.y-=h.latestYMove,h.x-=C,h.y-=D,h.x=-h.x,h.y=-h.y,h.x+=C,h.y+=D;if(3==w||4==w){l=Math.abs(h.latestXMove);m=Math.abs(h.latestYMove);var n=A/(A+z)*(l/(l+m));n>(z/(A+z)*(m/(l+m))+n)*Math.random()?(h.x=0>h.latestXMove?C+z:C-z,h.y=B(D-A,D+A)):(h.y=0>h.latestYMove?D+A:D-A,h.x=B(C-z,C+z))}}}for(q=
0;q<F;q++){k(q);c=da[Q[q]];for(g=0;g<G;g++)dot=c[g],v.beginPath(),v.arc(dot.x,dot.y,V,0,2*Math.PI),v.fillStyle=ha,v.fill();!0===ka&&(v.beginPath(),v.lineWidth=aa,v.moveTo(S/2-X,T/2),v.lineTo(S/2+X,T/2),v.fillStyle=Z,v.stroke(),v.beginPath(),v.lineWidth=aa,v.moveTo(S/2,T/2-Y),v.lineTo(S/2,T/2+Y),v.fillStyle=Z,v.stroke());if(!0===ma){if(1===w||2===w)v.lineWidth=H,v.strokeStyle=ba,v.beginPath(),v.ellipse(C,D,z+H/2,A+H/2,0,0,2*Math.PI),v.stroke();if(3===w||4===w)v.lineWidth=H,v.strokeStyle=ba,v.strokeRect(C-
z-H/2,D-A-H/2,2*z+H,2*A+H)}}void 0===f?f=performance.now():(c=performance.now(),N.push(c-f),f=c)}}var e=window.requestAnimationFrame(d);a.choices!=jsPsych.NO_KEYS&&(la=jsPsych.pluginAPI.getKeyboardResponse({callback_function:c,valid_responses:a.choices,rt_method:"performance",persist:!1,allow_held_key:!1}));var f})()};return c}();jsPsych.plugins.reconstruction=function(){var c={};c.info={name:"reconstruction",description:"",parameters:{stim_function:{type:jsPsych.plugins.parameterType.FUNCTION,pretty_name:"Stimulus function",default:void 0,description:"A function with a single parameter that returns an HTML-formatted string representing the stimulus."},starting_value:{type:jsPsych.plugins.parameterType.FLOAT,pretty_name:"Starting value",default:.5,description:"The starting value of the stimulus parameter."},step_size:{type:jsPsych.plugins.parameterType.FLOAT,
pretty_name:"Step size",default:.05,description:"The change in the stimulus parameter caused by pressing one of the modification keys."},key_increase:{type:jsPsych.plugins.parameterType.KEYCODE,pretty_name:"Key increase",default:"h",description:"The key to press for increasing the parameter value."},key_decrease:{type:jsPsych.plugins.parameterType.KEYCODE,pretty_name:"Key decrease",default:"g",description:"The key to press for decreasing the parameter value."},button_label:{type:jsPsych.plugins.parameterType.STRING,
pretty_name:"Button label",default:"Continue",description:"The text that appears on the button to finish the trial."}}};c.trial=function(d,a){function b(b){d.innerHTML='<div id="jspsych-reconstruction-stim-container">'+a.stim_function(b)+"</div>";d.innerHTML+='<button id="jspsych-reconstruction-next" class="jspsych-btn jspsych-reconstruction">'+a.button_label+"</button>";d.querySelector("#jspsych-reconstruction-next").addEventListener("click",c)}function c(){var b=performance.now()-k;jsPsych.pluginAPI.cancelKeyboardResponse(g);
b={rt:b,final_value:e,start_value:a.starting_value};d.innerHTML="";jsPsych.finishTrial(b)}var e=a.starting_value,g=jsPsych.pluginAPI.getKeyboardResponse({callback_function:function(d){var c="string"==typeof a.key_increase?jsPsych.pluginAPI.convertKeyCharacterToKeyCode(a.key_increase):a.key_increase,f="string"==typeof a.key_decrease?jsPsych.pluginAPI.convertKeyCharacterToKeyCode(a.key_decrease):a.key_decrease;d.key==c?e+=a.step_size:d.key==f&&(e-=a.step_size);e=Math.max(Math.min(1,e),0);b(e)},valid_responses:[a.key_increase,
a.key_decrease],rt_method:"performance",persist:!0,allow_held_key:!0});b(e);var k=performance.now()};return c}();jsPsych.plugins.resize=function(){var c={};c.info={name:"resize",description:"",parameters:{item_height:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Item height",default:1,description:"The height of the item to be measured."},item_width:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Item width",default:1,description:"The width of the item to be measured."},prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:null,description:"The content displayed below the resizable box and above the button."},
pixels_per_unit:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Pixels per unit",default:100,description:"After the scaling factor is applied, this many pixels will equal one unit of measurement."},starting_size:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Starting size",default:100,description:"The initial size of the box, in pixels, along the larget dimension."},button_label:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Button label",default:"Continue",description:"Label to display on the button to complete calibration."}}};
c.trial=function(d,a){var b=a.item_width/a.item_height;if(a.item_width>=a.item_height)var c=a.starting_size,e=Math.round(a.starting_size/b);else e=a.starting_size,c=Math.round(a.starting_size*b);c='<div id="jspsych-resize-div" style="border: 2px solid steelblue; height: '+e+"px; width:"+c+'px; margin: 7px auto; background-color: lightsteelblue; position: relative;"><div id="jspsych-resize-handle" style="cursor: nwse-resize; background-color: steelblue; width: 10px; height: 10px; border: 2px solid lightsteelblue; position: absolute; bottom: 0; right: 0;"></div></div>';
null!==a.prompt&&(c+=a.prompt);c+='<a class="jspsych-btn" id="jspsych-resize-btn">'+a.button_label+"</a>";d.innerHTML=c;document.getElementById("jspsych-resize-btn").addEventListener("click",function(){B=p.offsetWidth;u=B/a.item_width/a.pixels_per_unit;document.getElementById("jspsych-content").style.transform="scale("+u+")";document.removeEventListener("mousemove",r);document.removeEventListener("mouseup",m);d.innerHTML="";jsPsych.finishTrial({final_height_px:E,final_width_px:B,scale_factor:u})});
var g=!1,k,h,n,l;d.querySelector("#jspsych-resize-handle").addEventListener("mousedown",function(a){a.preventDefault();g=!0;k=a.pageX;h=a.pageY;n=parseInt(p.style.width);l=parseInt(p.style.height)});var m=function(a){g=!1};document.addEventListener("mouseup",m);var p=d.querySelector("#jspsych-resize-div"),r=function(a){if(g){var d=a.pageX-k;a=a.pageY-h;Math.abs(d)>=Math.abs(a)?(p.style.width=Math.round(Math.max(20,n+2*d))+"px",p.style.height=Math.round(Math.max(20,n+2*d)/b)+"px"):(p.style.height=
Math.round(Math.max(20,l+2*a))+"px",p.style.width=Math.round(b*Math.max(20,l+2*a))+"px")}};document.addEventListener("mousemove",r);var u,E,B};return c}();jsPsych.plugins["same-different-html"]=function(){var c={};c.info={name:"same-different-html",description:"",parameters:{stimuli:{type:jsPsych.plugins.parameterType.HTML_STRING,pretty_name:"Stimuli",default:void 0,array:!0,description:"The HTML content to be displayed."},answer:{type:jsPsych.plugins.parameterType.SELECT,pretty_name:"Answer",options:["same","different"],default:75,description:'Either "same" or "different".'},same_key:{type:jsPsych.plugins.parameterType.KEYCODE,pretty_name:"Same key",
default:"Q",description:""},different_key:{type:jsPsych.plugins.parameterType.KEYCODE,pretty_name:"Different key",default:"P",description:"The key that subjects should press to indicate that the two stimuli are the same."},first_stim_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"First stimulus duration",default:1E3,description:"How long to show the first stimulus for in milliseconds."},gap_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Gap duration",default:500,description:"How long to show a blank screen in between the two stimuli."},
second_stim_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Second stimulus duration",default:1E3,description:"How long to show the second stimulus for in milliseconds."},prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:null,description:"Any content here will be displayed below the stimulus."}}};c.trial=function(d,a){function b(){d.innerHTML="";jsPsych.pluginAPI.setTimeout(function(){c()},a.gap_duration)}function c(){var b='<div class="jspsych-same-different-stimulus">'+
a.stimuli[1]+"</div>";null!==a.prompt&&(b+=a.prompt);d.innerHTML=b;0<a.second_stim_duration&&jsPsych.pluginAPI.setTimeout(function(){d.querySelector(".jspsych-same-different-stimulus").style.visibility="hidden"},a.second_stim_duration);jsPsych.pluginAPI.getKeyboardResponse({callback_function:function(b){jsPsych.pluginAPI.clearAllTimeouts();var c=!1,f="string"==typeof a.same_key?jsPsych.pluginAPI.convertKeyCharacterToKeyCode(a.same_key):a.same_key,g="string"==typeof a.different_key?jsPsych.pluginAPI.convertKeyCharacterToKeyCode(a.different_key):
a.different_key;b.key==f&&"same"==a.answer&&(c=!0);b.key==g&&"different"==a.answer&&(c=!0);b={rt:b.rt,answer:a.answer,correct:c,stimulus:JSON.stringify([a.stimuli[0],a.stimuli[1]]),key_press:b.key};e&&(b.rt_stim1=e.rt,b.key_press_stim1=e.key);d.innerHTML="";jsPsych.finishTrial(b)},valid_responses:[a.same_key,a.different_key],rt_method:"performance",persist:!1,allow_held_key:!1})}d.innerHTML='<div class="jspsych-same-different-stimulus">'+a.stimuli[0]+"</div>";var e;0<a.first_stim_duration?jsPsych.pluginAPI.setTimeout(function(){b()},
a.first_stim_duration):jsPsych.pluginAPI.getKeyboardResponse({callback_function:function(a){e=a;b()},valid_responses:a.advance_key,rt_method:"performance",persist:!1,allow_held_key:!1})};return c}();jsPsych.plugins["same-different-image"]=function(){var c={};jsPsych.pluginAPI.registerPreload("same-different-image","stimuli","image");c.info={name:"same-different-image",description:"",parameters:{stimuli:{type:jsPsych.plugins.parameterType.IMAGE,pretty_name:"Stimuli",default:void 0,array:!0,description:"The images to be displayed."},answer:{type:jsPsych.plugins.parameterType.SELECT,pretty_name:"Answer",options:["same","different"],default:75,description:'Either "same" or "different".'},same_key:{type:jsPsych.plugins.parameterType.KEYCODE,
pretty_name:"Same key",default:"Q",description:""},different_key:{type:jsPsych.plugins.parameterType.KEYCODE,pretty_name:"Different key",default:"P",description:"The key that subjects should press to indicate that the two stimuli are the same."},first_stim_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"First stimulus duration",default:1E3,description:"How long to show the first stimulus for in milliseconds."},gap_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Gap duration",
default:500,description:"How long to show a blank screen in between the two stimuli."},second_stim_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Second stimulus duration",default:1E3,description:"How long to show the second stimulus for in milliseconds."},prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:null,description:"Any content here will be displayed below the stimulus."}}};c.trial=function(d,a){function b(){d.innerHTML="";jsPsych.pluginAPI.setTimeout(function(){c()},
a.gap_duration)}function c(){var b='<img class="jspsych-same-different-stimulus" src="'+a.stimuli[1]+'"></img>';null!==a.prompt&&(b+=a.prompt);d.innerHTML=b;0<a.second_stim_duration&&jsPsych.pluginAPI.setTimeout(function(){d.querySelector(".jspsych-same-different-stimulus").style.visibility="hidden"},a.second_stim_duration);jsPsych.pluginAPI.getKeyboardResponse({callback_function:function(b){jsPsych.pluginAPI.clearAllTimeouts();var c=!1,f="string"==typeof a.same_key?jsPsych.pluginAPI.convertKeyCharacterToKeyCode(a.same_key):
a.same_key,g="string"==typeof a.different_key?jsPsych.pluginAPI.convertKeyCharacterToKeyCode(a.different_key):a.different_key;b.key==f&&"same"==a.answer&&(c=!0);b.key==g&&"different"==a.answer&&(c=!0);b={rt:b.rt,answer:a.answer,correct:c,stimulus:JSON.stringify([a.stimuli[0],a.stimuli[1]]),key_press:b.key};e&&(b.rt_stim1=e.rt,b.key_press_stim1=e.key);d.innerHTML="";jsPsych.finishTrial(b)},valid_responses:[a.same_key,a.different_key],rt_method:"performance",persist:!1,allow_held_key:!1})}d.innerHTML=
'<img class="jspsych-same-different-stimulus" src="'+a.stimuli[0]+'"></img>';var e;0<a.first_stim_duration?jsPsych.pluginAPI.setTimeout(function(){b()},a.first_stim_duration):jsPsych.pluginAPI.getKeyboardResponse({callback_function:function(a){e=a;b()},valid_responses:a.advance_key,rt_method:"performance",persist:!1,allow_held_key:!1})};return c}();jsPsych.plugins["serial-reaction-time-mouse"]=function(){var c={};c.info={name:"serial-reaction-time-mouse",description:"",parameters:{target:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Target",array:!0,default:void 0,description:"The location of the target. The array should be the [row, column] of the target."},grid:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Grid",array:!0,default:[[1,1,1,1]],description:"This array represents the grid of boxes shown on the screen."},grid_square_size:{type:jsPsych.plugins.parameterType.INT,
pretty_name:"Grid square size",default:100,description:"The width and height in pixels of each square in the grid."},target_color:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Target color",default:"#999",description:"The color of the target square."},response_ends_trial:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Response ends trial",default:!0,description:"If true, the trial ends after a key press."},pre_target_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Pre-target duration",
default:0,description:"The number of milliseconds to display the grid before the target changes color."},trial_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Trial duration",default:null,description:"How long to show the trial"},fade_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Fade duration",default:null,description:"If a positive number, the target will progressively change color at the start of the trial, with the transition lasting this many milliseconds."},allow_nontarget_responses:{type:jsPsych.plugins.parameterType.BOOL,
pretty_name:"Allow nontarget response",default:!1,description:"If true, then user can make nontarget response."},prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:null,description:"Any content here will be displayed below the stimulus"}}};c.trial=function(d,a){function b(){var b=a.allow_nontarget_responses?d.querySelectorAll(".jspsych-serial-reaction-time-stimulus-cell"):[d.querySelector("#jspsych-serial-reaction-time-stimulus-cell-"+a.target[0]+"-"+a.target[1])];for(var f=
0;f<b.length;f++)b[f].addEventListener("mousedown",function(b){if(-1!=e){var d={};d.row=b.currentTarget.getAttribute("data-row");d.column=b.currentTarget.getAttribute("data-column");d.rt=performance.now()-e;g=null==g.rt?d:g;a.response_ends_trial&&c()}});e=performance.now();null!=a.fade_duration&&(d.querySelector("#jspsych-serial-reaction-time-stimulus-cell-"+a.target[0]+"-"+a.target[1]).style.transition="background-color "+a.fade_duration);d.querySelector("#jspsych-serial-reaction-time-stimulus-cell-"+
a.target[0]+"-"+a.target[1]).style.backgroundColor=a.target_color;null!==a.trial_duration&&jsPsych.pluginAPI.setTimeout(c,a.trial_duration)}function c(){jsPsych.pluginAPI.clearAllTimeouts();var b={rt:g.rt,grid:JSON.stringify(a.grid),target:JSON.stringify(a.target),response_row:g.row,response_column:g.column,correct:g.row==a.target[0]&&g.column==a.target[1]};d.innerHTML="";jsPsych.finishTrial(b)}var e=-1,g={rt:null,row:null,column:null},k=this.stimulus(a.grid,a.grid_square_size);d.innerHTML=k;0>=a.pre_target_duration?
b():jsPsych.pluginAPI.setTimeout(function(){b()},a.pre_target_duration);null!==a.prompt&&(d.innerHTML+=a.prompt)};c.stimulus=function(d,a,b,c,e){for(var f="<div id='jspsych-serial-reaction-time-stimulus' style='margin:auto; display: table; table-layout: fixed; border-spacing:"+a/4+"px'>",k=0;k<d.length;k++){f+="<div class='jspsych-serial-reaction-time-stimulus-row' style='display:table-row;'>";for(var h=0;h<d[k].length;h++)f+="<div class='jspsych-serial-reaction-time-stimulus-cell' id='jspsych-serial-reaction-time-stimulus-cell-"+
k+"-"+h+"' data-row="+k+" data-column="+h+" style='width:"+a+"px; height:"+a+"px; display:table-cell; vertical-align:middle; text-align: center; cursor: pointer; font-size:"+a/2+"px;",1==d[k][h]&&(f+="border: 2px solid black;"),"undefined"!==typeof b&&b[0]==k&&b[1]==h&&(f+="background-color: "+c+";"),f+="'>","undefined"!==typeof e&&!1!==e[k][h]&&(f+=e[k][h]),f+="</div>";f+="</div>"}return f+"</div>"};return c}();jsPsych.plugins["serial-reaction-time"]=function(){var c={};c.info={name:"serial-reaction-time",description:"",parameters:{grid:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Grid",array:!0,default:[[1,1,1,1]],description:"This array represents the grid of boxes shown on the screen."},target:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Target",array:!0,default:void 0,description:"The location of the target. The array should be the [row, column] of the target."},choices:{type:jsPsych.plugins.parameterType.KEYCODE,
pretty_name:"Choices",array:!0,default:[["3","5","7","9"]],description:" Each entry in this array is the key that should be pressed for that corresponding location in the grid."},grid_square_size:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Grid square size",default:100,description:"The width and height in pixels of each square in the grid."},target_color:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Target color",default:"#999",description:"The color of the target square."},response_ends_trial:{type:jsPsych.plugins.parameterType.BOOL,
pretty_name:"Response ends trial",default:!0,description:"If true, trial ends when user makes a response."},pre_target_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Pre-target duration",default:0,description:"The number of milliseconds to display the grid before the target changes color."},trial_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Trial duration",default:null,description:"How long to show the trial."},show_response_feedback:{type:jsPsych.plugins.parameterType.BOOL,
pretty_name:"Show response feedback",default:!1,description:"If true, show feedback indicating where the user responded and whether it was correct."},feedback_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Feedback duration",default:200,description:"The length of time in milliseconds to show the feedback."},fade_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Fade duration",default:null,description:"If a positive number, the target will progressively change color at the start of the trial, with the transition lasting this many milliseconds."},
prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:null,no_function:!1,description:" Any content here will be displayed below the stimulus."}}};c.trial=function(d,a){function b(){null!=a.fade_duration&&(d.querySelector("#jspsych-serial-reaction-time-stimulus-cell-"+a.target[0]+"-"+a.target[1]).style.transition="background-color "+a.fade_duration);d.querySelector("#jspsych-serial-reaction-time-stimulus-cell-"+a.target[0]+"-"+a.target[1]).style.backgroundColor=a.target_color;
n=jsPsych.pluginAPI.getKeyboardResponse({callback_function:g,valid_responses:k,allow_held_key:!1});null<a.trial_duration&&jsPsych.pluginAPI.setTimeout(c,a.trial_duration)}function c(){if(null==l.rt||0==a.show_response_feedback)e();else{var b=l.correct?"#0f0":"#f00";d.querySelector("#jspsych-serial-reaction-time-stimulus-cell-"+l.responseLoc[0]+"-"+l.responseLoc[1]).style.transition="";d.querySelector("#jspsych-serial-reaction-time-stimulus-cell-"+l.responseLoc[0]+"-"+l.responseLoc[1]).style.backgroundColor=
b;jsPsych.pluginAPI.setTimeout(e,a.feedback_duration)}}function e(){jsPsych.pluginAPI.clearAllTimeouts();"undefined"!==typeof n&&jsPsych.pluginAPI.cancelKeyboardResponse(n);var b={rt:l.rt,key_press:l.key,correct:l.correct,grid:JSON.stringify(a.grid),target:JSON.stringify(a.target)};d.innerHTML="";jsPsych.finishTrial(b)}function g(b){l=null==l.rt?b:l;for(var d=[],f=0;f<a.choices.length;f++)for(var g=0;g<a.choices[f].length;g++){var h="string"==typeof a.choices[f][g]?jsPsych.pluginAPI.convertKeyCharacterToKeyCode(a.choices[f][g]):
a.choices[f][g];if(b.key==h){d=[f,g];break}}l.responseLoc=d;l.correct=JSON.stringify(d)==JSON.stringify(a.target);a.response_ends_trial&&(a.show_response_feedback?c(l.correct):e())}for(var k=jsPsych.utils.flatten(a.choices);-1<k.indexOf("");)k.splice(k.indexOf(""),1);var h=this.stimulus(a.grid,a.grid_square_size);d.innerHTML=h;0>=a.pre_target_duration?b():jsPsych.pluginAPI.setTimeout(function(){b()},a.pre_target_duration);null!==a.prompt&&(d.innerHTML+=a.prompt);var n={},l={rt:null,key:!1,correct:!1}};
c.stimulus=function(d,a,b,c,e){for(var f="<div id='jspsych-serial-reaction-time-stimulus' style='margin:auto; display: table; table-layout: fixed; border-spacing:"+a/4+"px'>",k=0;k<d.length;k++){f+="<div class='jspsych-serial-reaction-time-stimulus-row' style='display:table-row;'>";for(var h=0;h<d[k].length;h++)f+="<div class='jspsych-serial-reaction-time-stimulus-cell' id='jspsych-serial-reaction-time-stimulus-cell-"+k+"-"+h+"' style='width:"+a+"px; height:"+a+"px; display:table-cell; vertical-align:middle; text-align: center; font-size:"+
a/2+"px;",1==d[k][h]&&(f+="border: 2px solid black;"),"undefined"!==typeof b&&b[0]==k&&b[1]==h&&(f+="background-color: "+c+";"),f+="'>","undefined"!==typeof e&&!1!==e[k][h]&&(f+=e[k][h]),f+="</div>";f+="</div>"}return f+"</div>"};return c}();jsPsych.plugins["survey-likert"]=function(){var c={};c.info={name:"survey-likert",description:"",parameters:{questions:{type:jsPsych.plugins.parameterType.COMPLEX,array:!0,pretty_name:"Questions",nested:{prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:void 0,description:"Questions that are associated with the slider."},labels:{type:jsPsych.plugins.parameterType.STRING,array:!0,pretty_name:"Labels",default:void 0,description:"Labels to display for individual question."},
required:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Required",default:!1,description:"Makes answering questions required."}}},preamble:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Preamble",default:null,description:"String to display at top of the page."},button_label:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Button label",default:"Continue",description:"Label of the button."}}};c.trial=function(d,a){var b="<style id=\"jspsych-survey-likert-css\">.jspsych-survey-likert-statement { display:block; font-size: 16px; padding-top: 40px; margin-bottom:10px; }.jspsych-survey-likert-opts { list-style:none; width:100%; margin:0; padding:0 0 35px; display:block; font-size: 14px; line-height:1.1em; }.jspsych-survey-likert-opt-label { line-height: 1.1em; color: #444; }.jspsych-survey-likert-opts:before { content: ''; position:relative; top:11px; /*left:9.5%;*/ display:block; background-color:#efefef; height:4px; width:100%; }.jspsych-survey-likert-opts:last-of-type { border-bottom: 0; }.jspsych-survey-likert-opts li { display:inline-block; /*width:19%;*/ text-align:center; vertical-align: top; }.jspsych-survey-likert-opts li input[type=radio] { display:block; position:relative; top:0; left:50%; margin-left:-6px; }</style>";
null!==a.preamble&&(b+='<div id="jspsych-survey-likert-preamble" class="jspsych-survey-likert-preamble">'+a.preamble+"</div>");b+='<form id="jspsych-survey-likert-form">';for(var c=0;c<a.questions.length;c++){b+='<label class="jspsych-survey-likert-statement">'+a.questions[c].prompt+"</label>";for(var e=100/a.questions[c].labels.length,g='<ul class="jspsych-survey-likert-opts" data-radio-group="Q'+c+'">',k=0;k<a.questions[c].labels.length;k++)g+='<li style="width:'+e+'%"><input type="radio" name="Q'+
c+'" value="'+k+'"',a.questions[c].required&&(g+=" required"),g+='><label class="jspsych-survey-likert-opt-label">'+a.questions[c].labels[k]+"</label></li>";g+="</ul>";b+=g}b+='<input type="submit" id="jspsych-survey-likert-next" class="jspsych-survey-likert jspsych-btn" value="'+a.button_label+'"></input>';d.innerHTML=b+"</form>";d.querySelector("#jspsych-survey-likert-form").addEventListener("submit",function(a){a.preventDefault();a=performance.now()-h;for(var b={},c=d.querySelectorAll("#jspsych-survey-likert-form .jspsych-survey-likert-opts"),
e=0;e<c.length;e++){var f=c[e].dataset.radioGroup,g=d.querySelector('input[name="'+f+'"]:checked');g=null===g?"":parseInt(g.value);var k={};k[f]=g;Object.assign(b,k)}a={rt:a,responses:JSON.stringify(b)};d.innerHTML="";jsPsych.finishTrial(a)});var h=performance.now()};return c}();jsPsych.plugins["survey-multi-choice"]=function(){var c={};c.info={name:"survey-multi-choice",description:"",parameters:{questions:{type:jsPsych.plugins.parameterType.COMPLEX,array:!0,pretty_name:"Questions",nested:{prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:void 0,description:"The strings that will be associated with a group of options."},options:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Options",array:!0,default:void 0,description:"Displays options for an individual question."},
required:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Required",default:!1,description:"Subject will be required to pick an option for each question."},horizontal:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Horizontal",default:!1,description:"If true, then questions are centered and options are displayed horizontally."}}},preamble:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Preamble",default:null,description:"HTML formatted string to display at the top of the page above all the questions."},
button_label:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Button label",default:"Continue",description:"Label of the button."}}};c.trial=function(d,a){var b=function(){return Array.prototype.slice.call(arguments,b.length).join(separator="-")};d.innerHTML='<style id="jspsych-survey-multi-choice-css"></style>';d.querySelector("#jspsych-survey-multi-choice-css").innerHTML=".jspsych-survey-multi-choice-question { margin-top: 2em; margin-bottom: 2em; text-align: left; }.jspsych-survey-multi-choice-text span.required {color: darkred;}.jspsych-survey-multi-choice-horizontal .jspsych-survey-multi-choice-text {  text-align: center;}.jspsych-survey-multi-choice-option { line-height: 2; }.jspsych-survey-multi-choice-horizontal .jspsych-survey-multi-choice-option {  display: inline-block;  margin-left: 1em;  margin-right: 1em;  vertical-align: top;}label.jspsych-survey-multi-choice-text input[type='radio'] {margin-right: 1em;}";
var c=b("jspsych-survey-multi-choice","form");d.innerHTML+='<form id="'+c+'"></form>';c=d.querySelector("#"+c);var e=b("jspsych-survey-multi-choice","preamble");null!==a.preamble&&(c.innerHTML+='<div id="'+e+'" class="'+e+'">'+a.preamble+"</div>");for(e=0;e<a.questions.length;e++){var g=[b("jspsych-survey-multi-choice","question")];a.questions[e].horizontal&&g.push(b("jspsych-survey-multi-choice","horizontal"));c.innerHTML+='<div id="'+b("jspsych-survey-multi-choice",e)+'" class="'+g.join(" ")+'"></div>';
g=b("#jspsych-survey-multi-choice",e);d.querySelector(g).innerHTML+='<p class="jspsych-survey-multi-choice-text survey-multi-choice">'+a.questions[e].prompt+"</p>";for(var k=0;k<a.questions[e].options.length;k++){var h=b("jspsych-survey-multi-choice","option",e,k);d.querySelector(g).innerHTML+='<div id="'+h+'" class="'+b("jspsych-survey-multi-choice","option")+'"></div>';h=document.getElementById(h);var n=b("jspsych-survey-multi-choice","response",e),l=b("jspsych-survey-multi-choice","response",e,
k),m=document.createElement("label");m.setAttribute("class","jspsych-survey-multi-choice-text");m.innerHTML=a.questions[e].options[k];m.setAttribute("for",l);var p=document.createElement("input");p.setAttribute("type","radio");p.setAttribute("name",n);p.setAttribute("id",l);p.setAttribute("value",a.questions[e].options[k]);h.appendChild(m);h.insertBefore(p,m)}a.questions[e].required&&(d.querySelector(g+" p").innerHTML+="<span class='required'>*</span>",d.querySelector(g+" input[type=radio]").required=
!0)}c.innerHTML+='<input type="submit" id="jspsych-survey-multi-choice-next" class="jspsych-survey-multi-choice jspsych-btn"'+(a.button_label?' value="'+a.button_label+'"':"")+"></input>";c.addEventListener("submit",function(a){a.preventDefault();d.querySelectorAll("div.jspsych-survey-multi-choice-question");var b=performance.now()-r,c={};a=d.querySelectorAll("div.jspsych-survey-multi-choice-question");for(var e=0;e<a.length;e++){match=a[e];var f="Q"+e,g=null!==match.querySelector("input[type=radio]:checked")?
match.querySelector("input[type=radio]:checked").value:"",h={};h[f]=g;Object.assign(c,h)}a={rt:b,responses:JSON.stringify(c)};d.innerHTML="";jsPsych.finishTrial(a)});var r=performance.now()};return c}();jsPsych.plugins["survey-multi-select"]=function(){var c={};c.info={name:"survey-multi-select",description:"",parameters:{questions:{type:jsPsych.plugins.parameterType.COMPLEX,array:!0,pretty_name:"Questions",nested:{prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:void 0,description:"The strings that will be associated with a group of options."},options:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Options",array:!0,default:void 0,description:"Displays options for an individual question."},
horizontal:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Horizontal",default:!1,description:"If true, then questions are centered and options are displayed horizontally."}}},required:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Required",default:!1,description:"Subject will be required to pick an option for each question."},preamble:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Preamble",default:null,description:"HTML formatted string to display at the top of the page above all the questions."},
button_label:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Button label",default:"Continue",description:"Label of the button."}}};c.trial=function(d,a){var b=function(){return Array.prototype.slice.call(arguments,b.length).join(separator="-")};d.innerHTML='<style id="jspsych-survey-multi-select-css"></style>';d.querySelector("#jspsych-survey-multi-select-css").innerHTML=".jspsych-survey-multi-select-question { margin-top: 2em; margin-bottom: 2em; text-align: left; }.jspsych-survey-multi-select-text span.required {color: darkred;}.jspsych-survey-multi-select-horizontal .jspsych-survey-multi-select-text {  text-align: center;}.jspsych-survey-multi-select-option { line-height: 2; }.jspsych-survey-multi-select-horizontal .jspsych-survey-multi-select-option {  display: inline-block;  margin-left: 1em;  margin-right: 1em;  vertical-align: top;}label.jspsych-survey-multi-select-text input[type='checkbox'] {margin-right: 1em;}";
var c=b("jspsych-survey-multi-select","form");d.innerHTML+='<form id="'+c+'"></form>';c=d.querySelector("#"+c);var e=b("jspsych-survey-multi-select","preamble");null!==a.preamble&&(c.innerHTML+='<div id="'+e+'" class="'+e+'">'+a.preamble+"</div>");for(e=0;e<a.questions.length;e++){var g=[b("jspsych-survey-multi-select","question")];a.questions[e].horizontal&&g.push(b("jspsych-survey-multi-select","horizontal"));c.innerHTML+='<div id="'+b("jspsych-survey-multi-select",e)+'" class="'+g.join(" ")+'"></div>';
g=b("#jspsych-survey-multi-select",e);d.querySelector(g).innerHTML+='<p id="survey-question" class="jspsych-survey-multi-select-text survey-multi-select">'+a.questions[e].prompt+"</p>";for(var k=0;k<a.questions[e].options.length;k++){var h=b("jspsych-survey-multi-select","option",e,k);d.querySelector(g).innerHTML+='<div id="'+h+'" class="'+b("jspsych-survey-multi-select","option")+'"></div>';h=document.getElementById(h);var n=b("jspsych-survey-multi-select","response",e),l=b("jspsych-survey-multi-select",
"response",e,k),m=document.createElement("label");m.setAttribute("class","jspsych-survey-multi-select-text");m.innerHTML=a.questions[e].options[k];m.setAttribute("for",l);var p=document.createElement("input");p.setAttribute("type","checkbox");p.setAttribute("name",n);p.setAttribute("id",l);p.setAttribute("value",a.questions[e].options[k]);h.appendChild(m);h.insertBefore(p,m)}}c.innerHTML+='<div class="fail-message"></div>';c.innerHTML+='<input type="submit" id="jspsych-survey-multi-select-next" class="jspsych-survey-multi-select jspsych-btn"'+
(a.button_label?' value="'+a.button_label+'"':"")+"></input>";c.addEventListener("submit",function(b){b.preventDefault();b=performance.now()-r;for(var c=d.querySelectorAll("div.jspsych-survey-multi-select-question"),e={},f=[],g=0;g<c.length;g++){match=c[g];for(var h=[],k=match.querySelectorAll("input[type=checkbox]:checked"),l=0;l<k.length;l++)currentChecked=k[l],h.push(currentChecked.value);k={};k["Q"+g]=h;Object.assign(e,k);0==h.length?f.push(!1):f.push(!0)}a.required&&f.includes(!1)?(d.querySelectorAll("input[type=checkbox]"),
d.querySelector(".fail-message").innerHTML='<span style="color: red;" class="required">'+a.required_msg+"</span>"):(b={rt:b,responses:JSON.stringify(e)},d.innerHTML="",jsPsych.finishTrial(b))});var r=performance.now()};return c}();jsPsych.plugins["survey-text"]=function(){var c={};c.info={name:"survey-text",description:"",parameters:{questions:{type:jsPsych.plugins.parameterType.COMPLEX,array:!0,pretty_name:"Questions",default:void 0,nested:{prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:void 0,description:"Prompt for the subject to response"},value:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Value",default:"",description:"The string will be used to populate the response field with editable answer."},
rows:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Rows",default:1,description:"The number of rows for the response text box."},columns:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Columns",default:40,description:"The number of columns for the response text box."},required:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Required",default:!1,description:"Require a response"}}},preamble:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Preamble",default:null,description:"HTML formatted string to display at the top of the page above all the questions."},
button_label:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Button label",default:"Continue",description:"The text that appears on the button to finish the trial."}}};c.trial=function(d,a){for(var b=0;b<a.questions.length;b++)"undefined"==typeof a.questions[b].rows&&(a.questions[b].rows=1);for(b=0;b<a.questions.length;b++)"undefined"==typeof a.questions[b].columns&&(a.questions[b].columns=40);for(b=0;b<a.questions.length;b++)"undefined"==typeof a.questions[b].value&&(a.questions[b].value=
"");var c="";null!==a.preamble&&(c+='<div id="jspsych-survey-text-preamble" class="jspsych-survey-text-preamble">'+a.preamble+"</div>");c+='<form id="jspsych-survey-text-form">';for(b=0;b<a.questions.length;b++){c+='<div id="jspsych-survey-text-"'+b+'" class="jspsych-survey-text-question" style="margin: 2em 0em;">';c+='<p class="jspsych-survey-text">'+a.questions[b].prompt+"</p>";var e=0==b?"autofocus":"",g=a.questions[b].required?"required":"";c=1==a.questions[b].rows?c+('<input type="text" name="#jspsych-survey-text-response-'+
b+'" size="'+a.questions[b].columns+'" value="'+a.questions[b].value+'" '+e+" "+g+"></input>"):c+('<textarea name="#jspsych-survey-text-response-'+b+'" cols="'+a.questions[b].columns+'" rows="'+a.questions[b].rows+'" '+e+" "+g+">"+a.questions[b].value+"</textarea>");c+="</div>"}c+='<input type="submit" id="jspsych-survey-text-next" class="jspsych-btn jspsych-survey-text" value="'+a.button_label+'"></input>';d.innerHTML=c+"</form>";d.querySelector("#jspsych-survey-text-form").addEventListener("submit",
function(){for(var a=performance.now()-k,b={},c=d.querySelectorAll("div.jspsych-survey-text-question"),e=0;e<c.length;e++){var f="Q"+e,g=c[e].querySelector("textarea, input").value,u={};u[f]=g;Object.assign(b,u)}a={rt:a,responses:JSON.stringify(b)};d.innerHTML="";jsPsych.finishTrial(a)});var k=performance.now()};return c}();jsPsych.plugins.video=function(){var c={};jsPsych.pluginAPI.registerPreload("video","sources","video");c.info={name:"video",description:"",parameters:{sources:{type:jsPsych.plugins.parameterType.VIDEO,pretty_name:"Sources",array:!0,default:void 0,description:"The video file to play."},width:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Width",default:"",description:"The width of the video in pixels."},height:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Height",default:"",description:"The height of the video display in pixels."},
autoplay:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Autoplay",default:!0,description:"If true, the video will begin playing as soon as it has loaded."},controls:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Controls",default:!1,description:"If true, the subject will be able to pause the video or move the playback to any point in the video."},prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt",default:null,description:"Any content here will be displayed below the video content."},
start:{type:jsPsych.plugins.parameterType.FLOAT,pretty_name:"Start",default:null,description:"Time to start the clip."},stop:{type:jsPsych.plugins.parameterType.FLOAT,pretty_name:"Stop",default:null,description:"Time to stop the clip."}}};c.trial=function(c,a){var b='<video id="jspsych-video-player"';a.width&&(b+=' width="'+a.width+'"');a.height&&(b+=' height="'+a.height+'"');a.autoplay&&(b+=" autoplay ");a.controls&&(b+=" controls ");b+=">";var d=jsPsych.pluginAPI.getVideoBuffer(a.sources[0]);if(!d)for(var e=
0;e<sources.length;e++){var g=sources[e];-1<g.indexOf("?")&&(g=g.substring(0,g.indexOf("?")));var k=g.substr(g.lastIndexOf(".")+1);k=k.toLowerCase();b+='<source src="'+g+'" type="video/'+k+'">'}b+="</video>";null!==a.prompt&&(b+=a.prompt);c.innerHTML=b;d&&(c.querySelector("#jspsych-video-player").src=d);c.querySelector("#jspsych-video-player").onended=function(){h()};c.querySelector("#jspsych-video-player").onplay=function(){null!==a.stop&&(null==a.start&&(a.start=0),jsPsych.pluginAPI.setTimeout(h,
1E3*(a.stop-a.start)))};null!==a.start&&(c.querySelector("#jspsych-video-player").currentTime=a.start);var h=function(){var b={stimulus:JSON.stringify(a.sources)};c.innerHTML="";jsPsych.finishTrial(b)}};return c}();jsPsych.plugins["visual-search-circle"]=function(){var c={};jsPsych.pluginAPI.registerPreload("visual-search-circle","target","image");jsPsych.pluginAPI.registerPreload("visual-search-circle","foil","image");jsPsych.pluginAPI.registerPreload("visual-search-circle","fixation_image","image");c.info={name:"visual-search-circle",description:"",parameters:{target:{type:jsPsych.plugins.parameterType.IMAGE,pretty_name:"Target",default:void 0,description:"The image to be displayed."},foil:{type:jsPsych.plugins.parameterType.IMAGE,
pretty_name:"Foil",default:void 0,description:"Path to image file that is the foil/distractor."},fixation_image:{type:jsPsych.plugins.parameterType.IMAGE,pretty_name:"Fixation image",default:void 0,description:"Path to image file that is a fixation target."},set_size:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Set size",default:void 0,description:"How many items should be displayed?"},target_present:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Target present",default:!0,description:"Is the target present?"},
target_size:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Target size",array:!0,default:[50,50],description:"Two element array indicating the height and width of the search array element images."},fixation_size:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Fixation size",array:!0,default:[16,16],description:"Two element array indicating the height and width of the fixation image."},circle_diameter:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Circle diameter",default:250,description:"The diameter of the search array circle in pixels."},
target_present_key:{type:jsPsych.plugins.parameterType.KEYCODE,pretty_name:"Target present key",default:"j",description:"The key to press if the target is present in the search array."},target_absent_key:{type:jsPsych.plugins.parameterType.KEYCODE,pretty_name:"Target absent key",default:"f",description:"The key to press if the target is not present in the search array."},trial_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Trial duration",default:null,description:"The maximum duration to wait for a response."},
fixation_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Fixation duration",default:1E3,description:"How long to show the fixation image for before the search array (in milliseconds)."}}};c.trial=function(c,a){function b(){var b=[];a.target_present&&b.push(a.target);b=b.concat(a.foil);for(var e=0;e<l.length;e++)u.innerHTML+="<img src='"+b[e]+"' style='position: absolute; top:"+l[e][0]+"px; left:"+l[e][1]+"px; width:"+a.target_size[0]+"px; height:"+a.target_size[1]+"px;'></img>";var f=
!1;key_listener=jsPsych.pluginAPI.getKeyboardResponse({callback_function:function(b){f=!0;var e=!1;if(jsPsych.pluginAPI.compareKeys(b.key,a.target_present_key)&&a.target_present||jsPsych.pluginAPI.compareKeys(b.key,a.target_absent_key)&&!a.target_present)e=!0;c.innerHTML="";d(b.rt,e,b.key)},valid_responses:[a.target_present_key,a.target_absent_key],rt_method:"performance",persist:!1,allow_held_key:!1});null!==a.trial_duration&&jsPsych.pluginAPI.setTimeout(function(){f||(jsPsych.pluginAPI.cancelKeyboardResponse(key_listener),
f=!0,c.innerHTML="",d(null,0,null))},a.trial_duration)}function d(b,c,d){b={correct:c,rt:b,key_press:d,locations:JSON.stringify(l),target_present:a.target_present,set_size:a.set_size};jsPsych.finishTrial(b)}var e=a.circle_diameter,g=e/2;e+=a.target_size[0];for(var k=a.target_size[0]/2,h=a.target_size[1]/2,n=[Math.floor(e/2-a.fixation_size[0]/2),Math.floor(e/2-a.fixation_size[1]/2)],l=[],m=a.set_size,p=Math.floor(360*Math.random()),r=0;r<m;r++)l.push([Math.floor(e/2+Math.cos((p+360/m*r)/180*Math.PI)*
g-h),Math.floor(e/2-Math.sin((p+360/m*r)/180*Math.PI)*g-k)]);c.innerHTML+='<div id="jspsych-visual-search-circle-container" style="position: relative; width:'+e+"px; height:"+e+'px"></div>';var u=c.querySelector("#jspsych-visual-search-circle-container");if(!Array.isArray(a.foil)){fa=[];for(r=0;r<a.set_size;r++)fa.push(a.foil);a.foil=fa}(function(){u.innerHTML+="<img src='"+a.fixation_image+"' style='position: absolute; top:"+n[0]+"px; left:"+n[1]+"px; width:"+a.fixation_size[0]+"px; height:"+a.fixation_size[1]+
"px;'></img>";jsPsych.pluginAPI.setTimeout(function(){b()},a.fixation_duration)})()};return c}();jsPsych.plugins["vsl-animate-occlusion"]=function(){var c={};jsPsych.pluginAPI.registerPreload("vsl-animate-occlusion","stimuli","image");c.info={name:"vsl-animate-occlusion",description:"",parameters:{stimuli:{type:jsPsych.plugins.parameterType.IMAGE,pretty_name:"Stimuli",default:void 0,array:!0,description:"A stimulus is a path to an image file."},choices:{type:jsPsych.plugins.parameterType.KEYCODE,pretty_name:"Choices",array:!0,default:jsPsych.ALL_KEYS,description:"This array contains the keys that the subject is allowed to press in order to respond to the stimulus. "},
canvas_size:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Canvas size",array:!0,default:[400,400],description:"Array specifying the width and height of the area that the animation will display in."},image_size:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Image size",array:!0,default:[100,100],description:"Array specifying the width and height of the images to show."},initial_direction:{type:jsPsych.plugins.parameterType.SELECT,pretty_name:"Initial direction",choices:["left","right"],
default:"left",description:"Which direction the stimulus should move first."},occlude_center:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Occlude center",default:!0,description:"If true, display a rectangle in the center of the screen that is just wide enough to occlude the image completely as it passes behind."},cycle_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Cycle duration",default:1E3,description:"How long it takes for a stimulus in the sequence to make a complete cycle."},
pre_movement_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Pre movement duration",default:500,description:"How long to wait before the stimuli starts moving from behind the center rectangle."}}};c.trial=function(c,a){function b(){if(a.stimuli.length==k)d();else{var c=g[h];0===h?h=1:h=0;var e=a.stimuli[k];k++;l.animate(c[0].params,c[0].ms,mina.linear,function(){l.animate(c[1].params,c[1].ms,mina.linear,function(){b()})});l.attr({href:e});performance.now()}}function d(){c.innerHTML=
"";jsPsych.pluginAPI.cancelKeyboardResponse(key_listener);var b={stimuli:JSON.stringify(a.stimuli),responses:JSON.stringify(e)};jsPsych.finishTrial(b)}var e=[],g=[[{params:{x:a.canvas_size[0]-a.image_size[0]},ms:a.cycle_duration/2},{params:{x:a.canvas_size[0]/2-a.image_size[0]/2},ms:a.cycle_duration/2}],[{params:{x:0},ms:a.cycle_duration/2},{params:{x:a.canvas_size[0]/2-a.image_size[0]/2},ms:a.cycle_duration/2}]],k=0,h="right"==a.initial_direction?0:1;c.innerHTML="<svg id='jspsych-vsl-animate-occlusion-canvas' width="+
a.canvas_size[0]+" height="+a.canvas_size[1]+"></svg>";var n=Snap("#jspsych-vsl-animate-occlusion-canvas"),l=n.image(a.stimuli[k],a.canvas_size[0]/2-a.image_size[0]/2,a.canvas_size[1]/2-a.image_size[1]/2,a.image_size[0],a.image_size[1]).attr({id:"jspsych-vsl-animate-occlusion-moving-image"});c.querySelector("#jspsych-vsl-animate-occlusion-moving-image").removeAttribute("preserveAspectRatio");a.occlude_center&&n.rect(a.canvas_size[0]/2-a.image_size[0]/2,0,a.image_size[0],a.canvas_size[1]).attr({fill:"#000"});
key_listener=jsPsych.pluginAPI.getKeyboardResponse({callback_function:function(a){e.push({key:a.key,stimulus:k-1,rt:a.rt})},valid_responses:a.choices,rt_method:"performance",persist:!0,allow_held_key:!1});0<a.pre_movement_duration?jsPsych.pluginAPI.setTimeout(function(){b()},a.pre_movement_duration):b()};return c}();jsPsych.plugins["vsl-grid-scene"]=function(){var c={};jsPsych.pluginAPI.registerPreload("vsl-grid-scene","stimuli","image");c.info={name:"vsl-grid-scene",description:"",parameters:{stimuli:{type:jsPsych.plugins.parameterType.IMAGE,pretty_name:"Stimuli",array:!0,default:void 0,description:"An array that defines a grid."},image_size:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Image size",array:!0,default:[100,100],description:"Array specifying the width and height of the images to show."},
trial_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Trial duration",default:2E3,description:"How long to show the stimulus for in milliseconds."}}};c.trial=function(d,a){d.innerHTML=c.generate_stimulus(a.stimuli,a.image_size);jsPsych.pluginAPI.setTimeout(function(){d.innerHTML="";var b={stimulus:JSON.stringify(a.stimuli)};jsPsych.finishTrial(b)},a.trial_duration)};c.generate_stimulus=function(c,a){var b=c.length,d=c[0].length;var e='<div id="jspsych-vsl-grid-scene-dummy" css="display: none;"><table id="jspsych-vsl-grid-scene table" style="border-collapse: collapse; margin-left: auto; margin-right: auto;">';
for(var g=0;g<b;g++){e+='<tr id="jspsych-vsl-grid-scene-table-row-'+g+'" css="height: '+a[1]+'px;">';for(var k=0;k<d;k++)e+='<td id="jspsych-vsl-grid-scene-table-'+g+"-"+k+'" style="padding: '+a[1]/10+"px "+a[0]/10+'px; border: 1px solid #555;"><div id="jspsych-vsl-grid-scene-table-cell-'+g+"-"+k+'" style="width: '+a[0]+"px; height: "+a[1]+'px;">',0!==c[g][k]&&(e+='<img src="'+c[g][k]+'" style="width: '+a[0]+"px; height: "+a[1]+'"></img>'),e+="</div>",e+="</td>";e+="</tr>"}return e+"</table></div>"};
return c}();
